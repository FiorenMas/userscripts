// ==UserScript==
// @name                YouTube Super Fast Chat
// @version             0.68.2
// @license             MIT
// @icon                https://raw.githubusercontent.com/cyfung1031/userscript-supports/main/icons/super-fast-chat.png
// @namespace           UserScript
// @match               https://www.youtube.com/live_chat*
// @match               https://www.youtube.com/live_chat_replay*
// @author              CY Fung
// @run-at              document-start
// @grant               none
// @unwrap
// @allFrames           true
// @inject-into         page
// @require             https://update.greasyfork.org/scripts/475632/1361351/ytConfigHacks.js
//
// @compatible          firefox Violentmonkey
// @compatible          firefox Tampermonkey
// @compatible          firefox FireMonkey
// @compatible          chrome Violentmonkey
// @compatible          chrome Tampermonkey
// @compatible          opera Violentmonkey
// @compatible          opera Tampermonkey
// @compatible          safari Stay
// @compatible          edge Violentmonkey
// @compatible          edge Tampermonkey
// @compatible          brave Violentmonkey
// @compatible          brave Tampermonkey
//
// @description         Ultimate Performance Boost for YouTube Live Chats
//
// @downloadURL https://raw.githubusercontent.com/FiorenMas/Userscripts/release/release/AYouTube20Super20Fast20Chat.user.js
// @updateURL https://raw.githubusercontent.com/FiorenMas/Userscripts/release/release/AYouTube20Super20Fast20Chat.meta.js
// ==/UserScript==
(e=>{"use strict";const t=window.WeakMapOriginal||window.WeakMap,n=+localStorage.__debugSuperFastChat__>0,o="function"==typeof ResizeObserver&&CSS.supports("position-area:center"),i=!0,s="72vw",{IntersectionObserver:r}=e;let a;try{a=document.createAttributeNS("http://www.w3.org/2000/svg","nil").addEventListener}catch(e){}const l=a;if(!l)return console.warn("pureAddEventListener cannot be obtained.");const c=(async()=>{})().constructor,[d]=[setTimeout];if(!r)return console.warn("Your browser does not support IntersectionObserver.\nPlease upgrade to the latest version.");if("object"!=typeof WebAssembly)return console.warn("Your browser is too old.\nPlease upgrade to the latest version.");if("undefined"==typeof CSS||"function"!=typeof(CSS||0).supports||!CSS.supports("left","clamp(-100%, calc( -100% * 0.5 ), 0%)"))return console.warn("Your browser is too old.\nPlease upgrade to the latest version.");const h="function"==typeof HTMLElement.prototype.append?31:0,u=h?"\n\n    elzm-fonts {\n        visibility: collapse;\n        position: fixed;\n        top: -10px;\n        left: -10px;\n        font-size: 10pt;\n        line-height: 100%;\n        width: 100px;\n        height: 100px;\n        transform: scale(0.1);\n        transform: scale(0.01);\n        transform: scale(0.001);\n        transform-origin: 0 0;\n        contain: strict;\n        display: block;\n\n        pointer-events: none !important;\n        user-select: none !important;\n    }\n\n    elzm-fonts[id]#elzm-fonts-yk75g {\n        user-select: none !important;\n        pointer-events: none !important;\n    }\n\n    elzm-font {\n        visibility: collapse;\n        position: absolute;\n        line-height: 100%;\n        width: 100px;\n        height: 100px;\n        contain: strict;\n        display: block;\n\n        user-select: none !important;\n        pointer-events: none !important;\n    }\n\n    elzm-font::before {\n        visibility: collapse;\n        position: absolute;\n        line-height: 100%;\n        width: 100px;\n        height: 100px;\n        contain: strict;\n        display: block;\n\n        content: '0aZ!@#$~^&*()_-+[]{}|;:><?\\0460\\0301\\0900\\1F00\\0370\\0102\\0100\\28EB2\\28189\\26DA0\\25A9C\\249BB\\23F61\\22E8B\\21927\\21076\\2048E\\1F6F5\\FF37\\F94F\\F0B2\\9F27\\9D9A\\9BEA\\9A6B\\98EC\\9798\\9602\\949D\\9370\\926B\\913A\\8FA9\\8E39\\8CC1\\8B26\\8983\\8804\\8696\\8511\\83BC\\828D\\8115\\7F9A\\7E5B\\7D07\\7B91\\7A2C\\78D2\\776C\\7601\\74AA\\73B9\\7265\\70FE\\6FBC\\6E88\\6D64\\6C3F\\6A9C\\6957\\67FE\\66B3\\6535\\63F2\\628E\\612F\\5FE7\\5E6C\\5CEE\\5B6D\\5A33\\58BC\\575B\\5611\\54BF\\536E\\51D0\\505D\\4F22\\4AD1\\41DB\\3B95\\3572\\2F3F\\26FD\\25A1\\2477\\208D\\1D0A\\1FB\\A1\\A3\\B4\\2CB\\60\\10C\\E22\\A5\\4E08\\B0\\627\\2500\\5E\\201C\\3C\\B7\\23\\26\\3E\\D\\20\\25EE8\\1F235\\FFD7\\FA10\\F92D\\9E8B\\9C3E\\9AE5\\98EB\\971D\\944A\\92BC\\9143\\8F52\\8DC0\\8B2D\\8973\\87E2\\8655\\84B4\\82E8\\814A\\7F77\\7D57\\7BC8\\7A17\\7851\\768C\\7511\\736C\\7166\\6F58\\6D7C\\6B85\\69DD\\6855\\667E\\64D2\\62CF\\6117\\5F6C\\5D9B\\5BBC\\598B\\57B3\\5616\\543F\\528D\\50DD\\4F57\\4093\\3395\\32B5\\31C8\\3028\\2F14\\25E4\\24D1\\2105\\2227\\A8\\2D9\\2CA\\2467\\B1\\2020\\2466\\251C\\266B\\AF\\4E91\\221E\\2464\\2266\\2207\\4E32\\25B3\\2463\\2010\\2103\\3014\\25C7\\24\\25BD\\4E18\\2460\\21D2\\2015\\2193\\4E03\\7E\\25CB\\2191\\25BC\\3D\\500D\\4E01\\25\\30F6\\2605\\266A\\40\\2B\\4E16\\7C\\A9\\4E\\21\\1F1E9\\FEE3\\F0A7\\9F3D\\9DFA\\9C3B\\9A5F\\98C8\\972A\\95B9\\94E7\\9410\\92B7\\914C\\8FE2\\8E2D\\8CAF\\8B5E\\8A02\\8869\\86E4\\8532\\83B4\\82A9\\814D\\7FFA\\7ED7\\7DC4\\7CCC\\7BC3\\7ACA\\797C\\783E\\770F\\760A\\74EF\\73E7\\72DD\\719C\\7005\\6ED8\\6DC3\\6CB2\\6A01\\68E1\\6792\\663A\\64F8\\63BC\\623B\\60FA\\5FD1\\5EA3\\5D32\\5BF5\\5AB2\\5981\\5831\\570A\\5605\\5519\\53FB\\52A2\\5110\\4FE3\\4EB8\\3127\\279C\\2650\\254B\\23E9\\207B\\1D34\\2AE\\176\\221A\\161\\200B\\300C\\4E4C\\1F921\\FF78\\FA0A\\F78A\\9EB9\\9D34\\9BD3\\9A6F\\9912\\97C6\\964E\\950C\\93E4\\92E5\\91F0\\90BB\\8F68\\8E18\\8B6C\\89F6\\889B\\874C\\8602\\84B1\\8378\\826E\\8113\\7FB1\\7EAF\\7D89\\7C20\\7AFB\\7988\\7840\\7705\\75CC\\749A\\73B3\\727F\\7113\\6FE8\\6ED6\\6DD3\\6CDA\\6BBB\\6A31\\6900\\67D9\\66A7\\655D\\6427\\630D\\61C6\\60AC\\5F78\\5E34\\5CE0\\5B80\\5A51\\590B\\57A1\\566F\\5551\\543D\\52DB\\518F\\5032\\3A17\\305C\\2749\\264A\\2567\\2476\\2139\\1EC0\\11AF\\2C8\\1AF\\E17\\2190\\2022\\2502\\2312\\2025\\50';\n\n        user-select: none !important;\n        pointer-events: none !important;\n    }\n\n  ":"",p=s?`\n\n\n    tp-yt-paper-tooltip[role="tooltip"] {\n      box-sizing: content-box !important;\n      margin: 0px !important;\n      padding: 0px !important;\n      contain: none !important;\n    }\n\n    tp-yt-paper-tooltip[role="tooltip"] #tooltip[style-target="tooltip"] {\n      box-sizing: content-box !important;\n      display: inline-block;\n      contain: none !important;\n    }\n\n\n    tp-yt-paper-tooltip[role="tooltip"] #tooltip[style-target="tooltip"]{\n      max-width: ${s};\n      width: max-content;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: nowrap;\n    }\n\n\n  `:"",_="undefined"!=typeof unsafeWindow?unsafeWindow:this instanceof Window?this:window,m="mchbwnoasqph";if(_[m])throw new Error("Duplicated Userscript Calling");_[m]=!0;setTimeout,clearTimeout;const f=setInterval,y=(clearInterval,HTMLElement.prototype.__shady_native_appendChild||HTMLElement.prototype.appendChild,HTMLElement.prototype.__shady_native_removeChild||HTMLElement.prototype.removeChild),g=e=>{for(const t in e)if(e.hasOwnProperty(t)&&"object"==typeof e[t])return t;return null};class v extends Set{constructor(e){super(),this.limit=e}add(e){if(!super.has(e)){super.add(e);let t=super.size-this.limit;if(t>0){const e=super.values();do{const t=e.next().value;super.delete(t)}while(--t>0)}}}removeAdd(e){super.delete(e),this.add(e)}}function b(e,t){if(t=t||[],!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((e=>b(e,t)));const n={};for(let o in e)t.includes(o)||(n[o]=b(e[o],t));return n}class w{constructor(){this.p=c.resolve()}lockWith(e){this.p=this.p.then((()=>new c(e).catch(console.warn)))}}const C=((e,t)=>{const n=(n,o)=>{e=n,t=o};return class extends c{constructor(o=n){super(o),o===n&&(this.resolve=e,this.reject=t)}}})();let E=null,A=null,S=null;const k=`${Math.floor(314159265359*Math.random()+314159265359).toString(36)}`,T=new Map;let I=null;const R=(e,t,n)=>{const o="string"==typeof e?e:"string"==typeof(e||0).component?(e||0).component:"";if(o&&t.id&&t.fullDurationSec){n||console.warn("[yt-chat] REUSE_TICKER: reuse bool is false");const e=T.get(`<${o}>${t.id}:${t.fullDurationSec}`),i=be(e);if(i&&!1===i.isAttached){const e=i.hostElement;if(e instanceof HTMLElement&&!1===e.isConnected&&null===e.parentNode&&e.getAttribute("__reuseid__")===k&&(e.hasAttribute("__nogc__")&&c.resolve(e).then((e=>{e.isConnected&&e.removeAttribute("__nogc__")})),!i.__dataInvalid&&i.__dataEnabled&&i.__dataReady)){if(!I){let e=document.createElement("noscript");e.style.all="unset",document.body.prepend(e),I=e}I.appendChild(e),i.__dataInvalid=!1,i.__dataEnabled=!0,i.__dataReady=!0,i.__data&&(i.__data=Object.assign({},i.__data)),i.__dataPending={},i.__dataOld={};try{i.markDirty()}catch(e){}try{i.markDirtyVisibilityObserver()}catch(e){}try{i.wasPrescan=i.wasVisible=!1}catch(e){}return e}}}},M=(e,t,n)=>("number"==typeof n&&(n=n.toFixed(3)),!(Math.abs(e.style.getPropertyValue(t)-n)<1e-5)&&(e.style.setProperty(t,n),!0));let x=c.resolve(),O=null,N=null,D=null,L=null,F=!1;const B=()=>{j&&(console.log("updateTickerCurrentTime"),L&&be(L)||(L=ve(document.querySelector("yt-live-chat-ticker-renderer"))),F=!0);const e=be(L),t=F?Date.now()/1e3-P/1e3:O;e instanceof HTMLElement&&t>=0&&M(e,"--ticker-current-time",t)},P=+new Date(performance.timeOrigin);let $=!1;let H=0,q=!1;const j=!1,K=document.getElementsByTagName("ticker-bg-overlay"),G=e=>{if(!j&&0===K.length)return;q=!1;const t=Date.now();t-H>375&&(H=t,B())},U=()=>{q||(q=!0,c.resolve().then(G))},z=()=>{$||($=!0,document.addEventListener("yt-action",(()=>{U()}),!0),U(),f(U,400))};j&&z();const W=e=>e?e.polymerController||e.inst||e||0:e||0,V=e=>{if(e){return W(e).constructor.prototype||null}return null},Y=(e,t)=>Function.prototype.bind.call(console.log,console,`%c ${e}`,"background: #222; color: #bada55",t),X=e=>e()||(console.assert(!1,`${e}`),!1),J=(e,t)=>{if(!e||"function"!=typeof e)return void console.warn("f is not a function",e);let n=`${e}`,o=0,i=-1,s=0;for(let e=0,t=n.length;e<t;e++){const t=n[e];t>="a"&&t<="z"||t>="A"&&t<="Z"?(i<e-1&&s++,i=e):o++}let r=`${e.length}.${o}.${s}`;return t?r===t||(console.warn("fnIntegrity=false",r),!1):r};let Q=null,Z=null;document.createElement4719=document.createElement,document.createElement=function(e){if(Z){const t=Q(e);if(t)return t}return document.createElement4719(e)},(()=>{const e=e=>{e&&(e.kevlar_should_maintain_stable_list=!0,e.kevlar_tuner_should_test_reuse_components=!0,e.kevlar_tuner_should_reuse_components=!0,e.enable_shadydom_free_scoped_node_methods=!1,e.enable_shadydom_free_scoped_query_methods=!1,e.enable_shadydom_free_scoped_readonly_properties_batch_one=!1,e.enable_shadydom_free_parent_node=!1,e.enable_shadydom_free_children=!1,e.enable_shadydom_free_last_child=!1)},t=t=>{if(t=t||(()=>{try{return ytcfg.data_}catch(e){}return null})()){const{EXPERIMENT_FLAGS:n,EXPERIMENTS_FORCED_FLAGS:o}=t;n&&(e(n),o&&e(o))}};window._ytConfigHacks.add((e=>{t(e)})),t()})();{let e=new MutationObserver((()=>{if(!e)return;let t=document.head;if(!t)return;e.disconnect(),e.takeRecords(),e=null;let n=document.createElement("meta");n.setAttribute("name","google"),n.setAttribute("content","notranslate"),t.appendChild(n)}));e.observe(document,{subtree:!0,childList:!0})}console.assert(!0);CSS.supports("contain","layout paint style")||console.warn("Your browser does not support css property 'contain'.\nPlease upgrade to the latest version.".trim());const ee=CSS.supports("overflow-anchor","auto");ee||console.warn("Your browser does not support css property 'overflow-anchor'.\nPlease upgrade to the latest version.".trim());const te=ee&&i,ne=(e,t)=>{let n=null;try{n=Object.getOwnPropertyDescriptor(e,t).get}catch(e){}return"function"==typeof n?e=>{try{return n.call(e)}catch(e){}return e[t]}:e=>e[t]},oe=ne(Node.prototype,"parentNode"),ie=ne(HTMLElement.prototype,"previousElementSibling"),se=ne(HTMLElement.prototype,"nextElementSibling"),re=ne(HTMLElement.prototype,"lastElementChild");let ae=[],le=0;const[ce]=[console],de={log(...e){if(o)return 1===le?he(...e):ce.log(...e)},warn(...e){if(o)return 1===le?ue(...e):ce.warn(...e)},debug(...e){if(o)return 1===le?pe(...e):ce.debug(...e)}},he=(...e)=>{for(const t of e){if("string"!=typeof t)break;if(t.endsWith("OK"))return}ae.push(["log",...e])},ue=(...e)=>{ae.push(["warn",...e])},pe=(...e)=>{ae.push(["debug",...e])},_e=(e,t)=>{if(!o)return;0!==le&&ce.warn("groupDI in groupCollapsed fails",le),le++,ae.length=0;let i="groupCollapsed";n&&(i="group"),ae.push([i,`%c${e}%c${t}`,"background-color: #010502; color: #6acafe; font-weight: 700; padding: 2px;","background-color: #010502; color: #6ad9fe; font-weight: 300; padding: 2px;"])},me=()=>{if(o&&(le--,0!==le&&ce.warn("groupDI in groupEnd fails",le),ae.length>=0)){let e=!1;for(const t of ae)if("group"!==t[0]&&"groupCollapsed"!==t[0]&&"[Begin]"!==t[1]&&"[End]"!==t[1]){e=!0;break}if(e){for(const e of ae){const t=e.slice(1);let n="";for(const e of t){if("string"!=typeof e){n="";break}"OK"===e||"NG"===e?n=e:e.endsWith(" OK")?n="OK":e.endsWith(" NG")&&(n="NG")}let o=t;n&&(o=[t.map((e=>`%c${e}`)).join(" "),...t.map((e=>"OK"===n&&e.includes(n)?"background-color:rgb(29, 29, 29); color:rgb(57, 215, 83); font-weight: 600;":"NG"===n&&e.includes(n)?"background-color:rgb(29, 29, 29); color:rgb(215, 133, 57); font-weight: 600;":"background-color:rgb(29, 29, 29); color:rgb(231, 231, 231); font-weight: 400;"))]),console[e[0]](...o)}console.groupEnd(),ae.length=0}}},fe="ytI-ce-registry-created",ye=new c((e=>{if("undefined"==typeof customElements){"__CE_registry"in document||Object.defineProperty(document,"__CE_registry",{get(){},set(e){return"object"==typeof e&&(delete this.__CE_registry,this.__CE_registry=e,this.dispatchEvent(new CustomEvent(fe))),!0},enumerable:!1,configurable:!0});let t=n=>{document.removeEventListener(fe,t,!1);const o=e;e=null,t=null,o()};document.addEventListener(fe,t,!1)}else e()})),ge="undefined"!=typeof ResizeObserver?e=>new c((t=>{let n=new ResizeObserver((e=>{e&&e.length>=1&&(t(),n.disconnect(),n=null)}));n.observe(e)})):e=>new c((t=>{let n=new r((e=>{e&&e.length>=1&&(t(),n.disconnect(),n=null)}));n.observe(e)})),ve="function"==typeof WeakRef?e=>e?new WeakRef(e):null:e=>e||null,be=e=>e&&e.deref?e.deref():e,{insertBeforeNaFn:we,appendChildNaFn:Ce}=(()=>{const e=document.createElement("dummy-388").constructor,t=e.prototype.insertBefore,n=e.prototype.appendChild;return{insertBeforeNaFn:(e,n,o)=>{t.call(e,n,o)},appendChildNaFn:(e,t)=>{n.call(e,t)}}})();let Ee=0;const Ae=[];let Se=null;const ke=()=>Se||(Se=c.all([customElements.whenDefined("yt-live-chat-app"),customElements.whenDefined("yt-live-chat-renderer")]).then((async()=>{const e="yt-live-chat-renderer";let t=document.querySelector(e);if(t)console.log("[yt-chat-lcr] lcr exists");else{let n=null;const o=document.querySelector("yt-live-chat-app")||document.createElement("yt-live-chat-app"),i=V(o);let s,r=0,a=!1;t=await new c((t=>{if("function"==typeof i.createComponent_&&!i.createComponent99_&&3===i.createComponent_.length)return console.log("[yt-chat-lcr] lcaProto.createComponent_ is found"),i.createComponent99_=i.createComponent_,i.createComponent98_=function(e,n,o){const i=R(e,n,o);if(void 0!==i)return i;const s=this.createComponent99_(e,n,o);if("yt-live-chat-renderer"===(("string"==typeof e?e:(e||0).component)||`${(s||0).nodeName}`.toLowerCase())&&!a){r=1,Ee|=1;for(const e of Ae)e(s);Ae.length=0,t(s),console.log("[yt-chat-lcr] element found by method 1")}return s},void(i.createComponent_=i.createComponent98_);const o=document.getElementsByTagName(e);s=()=>{const e=o[0];e&&(r=2,Ee|=2,t(e),console.log("[yt-chat-lcr] element found by method 2"))},n=new MutationObserver(s),n.observe(document,{subtree:!0,childList:!0,attributes:!0}),document.addEventListener("yt-action",s,!0),s()})),a=!0,n&&(n.disconnect(),n.takeRecords(),n=null),s&&(document.removeEventListener("yt-action",s,!0),s=null),console.log(`[yt-chat-lcr] lcr appears, dom = ${document.getElementsByTagName(e).length}, method = ${r}`)}return t}))),{addCssManaged:Te}=(()=>{const e=()=>{_e("YouTube Super Fast Chat"," | Fonts Pre-Rendering");let e=document.createElement("elzm-fonts");e.id="elzm-fonts-yk75g";const t=[];let n=document.createElement("elzm-font");if(t.push(n),1&h)for(const e of[100,200,300,400,500,600,700,800,900])n=document.createElement("elzm-font"),n.style.fontWeight=e,t.push(n);if(2&h)for(const e of[100,200,300,400,500,600,700,800,900])n=document.createElement("elzm-font"),n.style.fontFamily="Roboto",n.style.fontWeight=e,t.push(n);if(4&h)for(const e of[100,200,300,400,500,600,700,800,900])n=document.createElement("elzm-font"),n.style.fontFamily='"YouTube Noto",Roboto,Arial,Helvetica,sans-serif',n.style.fontWeight=e,t.push(n);if(8&h)for(const e of[100,200,300,400,500,600,700,800,900])n=document.createElement("elzm-font"),n.style.fontFamily='"Noto",Roboto,Arial,Helvetica,sans-serif',n.style.fontWeight=e,t.push(n);if(16&h)for(const e of[100,200,300,400,500,600,700,800,900])n=document.createElement("elzm-font"),n.style.fontFamily="sans-serif",n.style.fontWeight=e,t.push(n);de.log("number of elzm-font elements",t.length),HTMLElement.prototype.append.apply(e,t),(document.body||document.documentElement).appendChild(e),de.log("elzm-font elements have been added to the page for rendering."),me()};let t=!1;return{addCssManaged:()=>{!t&&document.documentElement&&document.head&&(t=!0,document.head.appendChild(function(){let e=document.createElement("style");return e.id="ewRvC",e}()).textContent=`\n\n    @property --ticker-rtime {\n      syntax: "<percentage>";\n      inherits: false;\n      initial-value: 0%;\n    }\n\n    .run-ticker {\n      --ticker-bg:linear-gradient(90deg, var(--ticker-c1),var(--ticker-c1) var(--ticker-rtime),var(--ticker-c2) var(--ticker-rtime),var(--ticker-c2));\n    }\n\n    .run-ticker,\n    yt-live-chat-ticker-renderer #items > * > #container.run-ticker,\n    yt-live-chat-ticker-renderer[class] #items[class] > *[class] > #container.run-ticker[class]\n    {\n      background: var(--ticker-bg) !important;\n    }\n\n    yt-live-chat-ticker-dummy777-item-renderer {\n      background: #00000001;\n    }\n\n    yt-live-chat-ticker-dummy777-item-renderer[dummy777] {\n      position: fixed !important;\n      top: -1000px !important;\n      left: -1000px !important;\n      font-size: 1px !important;\n      color: transparent !important;\n      pointer-events: none !important;\n      z-index: -1 !important;\n      contain: strict !important;\n      box-sizing: border-box !important;\n      pointer-events: none !important;\n      user-select: none !important;\n      max-width: 1px !important;\n      max-height: 1px !important;\n      overflow: hidden !important;\n      visibility: collapse !important;\n      display: none !important;\n    }\n\n    yt-live-chat-ticker-dummy777-item-renderer #container {\n      background: inherit;\n    }\n\n\n    ${u}\n\n    \n    tp-yt-iron-dropdown.yt-live-chat-app ytd-menu-popup-renderer  {\n        -webkit-backdrop-filter: none;\n        backdrop-filter: none;\n    }\n  \n\n    @supports (contain: layout paint style) {\n\n      \n\n    /* ------------------------------------------------------------------------------------------------------------- */\n\n    yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip, yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip yt-live-chat-author-badge-renderer, yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip yt-live-chat-author-badge-renderer #image, yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip yt-live-chat-author-badge-renderer #image img {\n        contain: layout style;\n    }\n\n    #items.style-scope.yt-live-chat-item-list-renderer {\n        contain: layout paint style;\n    }\n\n    #item-offset.style-scope.yt-live-chat-item-list-renderer {\n        contain: style;\n    }\n\n    #item-scroller.style-scope.yt-live-chat-item-list-renderer {\n        contain: size style;\n    }\n\n    #contents.style-scope.yt-live-chat-item-list-renderer, #chat.style-scope.yt-live-chat-renderer, img.style-scope.yt-img-shadow[width][height] {\n        contain: size layout paint style;\n    }\n\n    .style-scope.yt-live-chat-ticker-renderer[role="button"][aria-label], .style-scope.yt-live-chat-ticker-renderer[role="button"][aria-label] > #container {\n        contain: layout paint style;\n    }\n\n    yt-live-chat-text-message-renderer.style-scope.yt-live-chat-item-list-renderer, yt-live-chat-membership-item-renderer.style-scope.yt-live-chat-item-list-renderer, yt-live-chat-paid-message-renderer.style-scope.yt-live-chat-item-list-renderer, yt-live-chat-banner-manager.style-scope.yt-live-chat-item-list-renderer {\n        contain: layout style;\n    }\n\n    tp-yt-paper-tooltip[style*="inset"][role="tooltip"] {\n        contain: layout paint style;\n    }\n\n    /* ------------------------------------------------------------------------------------------------------------- */\n\n  \n\n    }\n\n    @supports (color: var(--general)) {\n\n      html {\n          --yt-live-chat-item-list-renderer-padding: 0px 0px;\n      }\n\n      \n\n    #item-offset.style-scope.yt-live-chat-item-list-renderer > #items.style-scope.yt-live-chat-item-list-renderer {\n        position: static !important;\n    }\n\n  \n\n      \n\n    /* remove YouTube constant will-change */\n    /* constant value will slow down the performance; default auto */\n\n    /* www-player.css */\n    html .ytp-contextmenu,\n    html .ytp-settings-menu {\n        will-change: unset;\n    }\n\n    /* frequently matched elements */\n    html .fill.yt-interaction,\n    html .stroke.yt-interaction,\n    html .yt-spec-touch-feedback-shape__fill,\n    html .yt-spec-touch-feedback-shape__stroke {\n        will-change: unset;\n    }\n\n    /* live_chat_polymer.js */\n    /*\n    html .toggle-button.tp-yt-paper-toggle-button,\n    html #primaryProgress.tp-yt-paper-progress,\n    html #secondaryProgress.tp-yt-paper-progress,\n    html #onRadio.tp-yt-paper-radio-button,\n    html .fill.yt-interaction,\n    html .stroke.yt-interaction,\n    html .yt-spec-touch-feedback-shape__fill,\n    html .yt-spec-touch-feedback-shape__stroke {\n        will-change: unset;\n    }\n    */\n\n    /* desktop_polymer_enable_wil_icons.js */\n    /* html .fill.yt-interaction,\n    html .stroke.yt-interaction, */\n    html tp-yt-app-header::before,\n    html tp-yt-iron-list,\n    html #items.tp-yt-iron-list > *,\n    html #onRadio.tp-yt-paper-radio-button,\n    html .toggle-button.tp-yt-paper-toggle-button,\n    html ytd-thumbnail-overlay-toggle-button-renderer[use-expandable-tooltip] #label.ytd-thumbnail-overlay-toggle-button-renderer,\n    html #items.ytd-post-multi-image-renderer,\n    html #items.ytd-horizontal-card-list-renderer,\n    html #items.yt-horizontal-list-renderer,\n    html #left-arrow.yt-horizontal-list-renderer,\n    html #right-arrow.yt-horizontal-list-renderer,\n    html #items.ytd-video-description-infocards-section-renderer,\n    html #items.ytd-video-description-music-section-renderer,\n    html #chips.ytd-feed-filter-chip-bar-renderer,\n    html #chips.yt-chip-cloud-renderer,\n    html #items.ytd-merch-shelf-renderer,\n    html #items.ytd-product-details-image-carousel-renderer,\n    html ytd-video-preview,\n    html #player-container.ytd-video-preview,\n    html #primaryProgress.tp-yt-paper-progress,\n    html #secondaryProgress.tp-yt-paper-progress,\n    html ytd-miniplayer[enabled] /* ,\n    html .yt-spec-touch-feedback-shape__fill,\n    html .yt-spec-touch-feedback-shape__stroke */ {\n        will-change: unset;\n    }\n\n    /* other */\n    .ytp-videowall-still-info-content[class],\n    .ytp-suggestion-image[class] {\n        will-change: unset !important;\n    }\n\n  \n\n      \n\n    img,\n    yt-img-shadow[height][width],\n    yt-img-shadow {\n        content-visibility: visible !important;\n    }\n\n  \n\n      yt-live-chat-item-list-renderer:not([allow-scroll]) #item-scroller.yt-live-chat-item-list-renderer {\n          overflow-y: scroll;\n          padding-right: 0;\n      }\n\n      \n\n    /* optional */\n    #item-offset.style-scope.yt-live-chat-item-list-renderer {\n        height: auto !important;\n        min-height: unset !important;\n    }\n\n    #items.style-scope.yt-live-chat-item-list-renderer {\n        transform: translateY(0px) !important;\n    }\n\n    /* optional */\n\n  \n\n      yt-icon[icon="down_arrow"] > *, yt-icon-button#show-more > * {\n          pointer-events: none !important;\n      }\n\n      #continuations, #continuations * {\n          contain: strict;\n          position: fixed;\n          top: 2px;\n          height: 1px;\n          width: 2px;\n          height: 1px;\n          visibility: collapse;\n      }\n\n      \n\n    yt-live-chat-renderer[has-action-panel-renderer] #show-more.yt-live-chat-item-list-renderer{\n        top: 4px;\n        transition-property: top;\n        bottom: unset;\n    }\n\n    yt-live-chat-renderer[has-action-panel-renderer] #show-more.yt-live-chat-item-list-renderer[disabled]{\n        top: -42px;\n    }\n\n  \n\n      \n\n    html #panel-pages.yt-live-chat-renderer > #input-panel.yt-live-chat-renderer:not(:empty) {\n        --yt-live-chat-action-panel-top-border: none;\n    }\n\n    html #panel-pages.yt-live-chat-renderer > #input-panel.yt-live-chat-renderer.iron-selected > *:first-child {\n        border-top: 1px solid var(--yt-live-chat-panel-pages-border-color);\n    }\n\n    html #panel-pages.yt-live-chat-renderer {\n        border-top: 0;\n        border-bottom: 0;\n    }\n\n  \n\n      \n\n    #input-panel #picker-buttons yt-live-chat-icon-toggle-button-renderer#product-picker {\n        contain: layout style;\n    }\n\n    #chat.yt-live-chat-renderer ~ #panel-pages.yt-live-chat-renderer {\n        overflow: visible;\n    }\n\n  \n\n    }\n\n\n    @supports (overflow-anchor: auto) {\n\n      .no-anchor * {\n          overflow-anchor: none;\n      }\n      .no-anchor > item-anchor {\n          overflow-anchor: auto;\n      }\n\n      item-anchor {\n\n          height:1px;\n          width: 100%;\n          transform: scaleY(0.00001);\n          transform-origin:0 0;\n          contain: strict;\n          opacity:0;\n          display:flex;\n          position:relative;\n          flex-shrink:0;\n          flex-grow:0;\n          margin-bottom:0;\n          overflow:hidden;\n          box-sizing:border-box;\n          visibility: visible;\n          content-visibility: visible;\n          contain-intrinsic-size: auto 1px;\n          pointer-events:none !important;\n\n      }\n\n      #item-scroller.style-scope.yt-live-chat-item-list-renderer[class] {\n          overflow-anchor: initial !important; /* whenever ENABLE_OVERFLOW_ANCHOR or not */\n      }\n\n      html item-anchor {\n\n          height: 1px;\n          width: 1px;\n          top: auto;\n          left: auto;\n          right: auto;\n          bottom: auto;\n          transform: translateY(-1px);\n          position: absolute;\n          z-index: -1;\n\n      }\n\n    }\n\n    @supports (color: var(--pre-rendering)) {\n\n      @keyframes dontRenderAnimation {\n          0% {\n              background-position-x: 3px;\n          }\n          100% {\n              background-position-x: 4px;\n          }\n      }\n\n      .dont-render[class] {\n          /* visibility: collapse !important; */\n          /* visibility: collapse will make innerText become "" which conflicts with BetterStreamChat; see https://greasyfork.org/scripts/469878/discussions/197267 */\n\n          transform: scale(0.01) !important;\n          transform: scale(0.00001) !important;\n          transform: scale(0.0000001) !important;\n          transform-origin: 0 0 !important;\n          z-index: -1 !important;\n          contain: strict !important;\n          box-sizing: border-box !important;\n\n          height: 1px !important;\n          height: 0.1px !important;\n          height: 0.01px !important;\n          height: 0.0001px !important;\n          height: 0.000001px !important;\n\n          animation: dontRenderAnimation 1ms linear 80ms 1 normal forwards !important;\n\n          pointer-events: none !important;\n          user-select: none !important;\n\n      }\n\n      #sk35z {\n        display: block !important;\n\n        visibility: collapse !important;\n\n        transform: scale(0.01) !important;\n        transform: scale(0.00001) !important;\n        transform: scale(0.0000001) !important;\n        transform-origin: 0 0 !important;\n        z-index: -1 !important;\n        contain: strict !important;\n        box-sizing: border-box !important;\n\n        height: 1px !important;\n        height: 0.1px !important;\n        height: 0.01px !important;\n        height: 0.0001px !important;\n        height: 0.000001px !important;\n\n        position: absolute !important;\n        top: -1000px !important;\n        left: -1000px !important;\n\n      }\n\n    }\n\n    [rNgzQ] {\n      opacity: 0 !important;\n      pointer-events: none !important;\n    }\n\n\n    \n\n    @keyframes blinker-miuzp {\n        0%, 60%, 100% {\n            opacity: 1;\n        }\n        30% {\n            opacity: 0.6;\n        }\n    }\n\n    yt-icon-button#show-more.has-new-messages-miuzp {\n        animation: blinker-miuzp 1.74s linear infinite;\n    }\n\n  \n\n    \n\n    yt-live-chat-paid-message-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {\n      pointer-events: none !important;\n    }\n\n    yt-live-chat-membership-item-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {\n      pointer-events: none !important;\n    }\n\n    yt-live-chat-paid-sticker-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {\n      pointer-events: none !important;\n    }\n\n    yt-live-chat-text-message-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {\n      pointer-events: none !important; /* TO_BE_REVIEWED */\n    }\n\n    yt-live-chat-auto-mod-message-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {\n      pointer-events: none !important;\n    }\n\n  \n\n    ${p}\n\n    \n    [menu-visible] {\n      --sfc47-text-select: none;\n    }\n    [menu-visible] #header[id][class],\n    [menu-visible] #content[id][class],\n    [menu-visible] #header[id][class] *,\n    [menu-visible] #content[id][class] * {\n      user-select: var(--sfc47-text-select) !important;\n    }\n    [menu-visible] #menu {\n      --sfc47-text-select: inherit;\n    }\n  \n\n    \n  yt-live-chat-header-renderer.yt-live-chat-renderer #label.yt-dropdown-menu::before {\n    border:0;\n  }\n  \n\n    \n    .style-scope.yt-live-chat-ticker-renderer #animation-container[id][class] {\n      position: relative;\n      display: grid;\n      grid-auto-columns: 1fr;\n      grid-auto-rows: 1fr;\n      grid-template-columns: repeat(1, 1fr);\n      gap: 7px;\n      padding-bottom: 0;\n      margin-bottom: 0;\n      padding-top: 0;\n      align-self: flex-start;\n      flex-wrap: nowrap;\n      margin-top: 1px;\n  }\n\n  .style-scope.yt-live-chat-ticker-renderer #animation-container > [id][class] {\n      margin-top: 0px;\n      margin-bottom: 0px;\n      flex-direction: row;\n      flex-wrap: nowrap;\n      align-items: center;\n      justify-content: flex-start;\n  }\n\n  .style-scope.yt-live-chat-ticker-renderer #animation-container > [id][class]:first-child::after {\n      content: '補';\n      visibility: collapse;\n      display: inline-block;\n      position: relative;\n      width: 0;\n      line-height: 22px;\n  }\n\n  \n\n    \n    #card  #author-name-chip > yt-live-chat-author-chip[single-line] {\n        flex-wrap: nowrap;\n        white-space: nowrap;\n        display: inline-flex;\n        flex-direction: row;\n        text-wrap: nowrap;\n        flex-shrink: 0;\n        align-items: center;\n    }\n\n    #card  #author-name-chip {\n        display: inline-flex;\n        flex-direction: row;\n        align-items: flex-start;\n    }\n  \n\n    \n    yt-live-chat-banner-manager#live-chat-banner.style-scope.yt-live-chat-item-list-renderer {\n      max-width: 100%;\n      box-sizing: border-box;\n    }\n  \n\n    \n    #reaction-control-panel-overlay[class] {\n      contain: strict;\n      margin: 0;\n      padding: 0;\n      border: 0;\n      box-sizing: border-box;\n      will-change: initial;\n    }\n    #reaction-control-panel-overlay[class] *[class] {\n      will-change: initial;\n    }\n  \n\n    \n\n      ticker-bg-overlay {\n        display: block;\n        position: absolute;\n        z-index: -1;\n        box-sizing: border-box;\n        border: 0;\n        padding: 0;\n        margin: 0;\n        width: 200%;\n        top: 0;\n        bottom: 0;\n        left: clamp(-100%, calc( -100% * ( var(--ticker-current-time) - var(--ticker-start-time) ) / var(--ticker-duration-time) ), 0%);\n        contain: strict;\n      }\n      ticker-bg-overlay-end2 {\n\n        all:unset;\n        position: fixed;\n        display: block;\n        margin-left: -0.5px;\n        top: 8px;\n        left: clamp(-250px, calc( 250px * ( ( var(--ticker-current-time) - var(--ticker-start-time) ) / var(--ticker-duration-time) - 1 ) ), 2px);\n\n        width: 1px;\n        height: 1px;\n        opacity: 0;\n        pointer-events: none;\n        box-sizing: border-box;\n        border: 0;\n        padding: 0;\n        margin: 0;\n        contain: strict;\n        z-index: -1;\n        visibility: collapse;\n\n\n      }\n\n\n        /* .r6-closing-ticker is provided in ADVANCED_TICKING */\n        /* so .r6-width-adjustable is only available for ADVANCED_TICKING too */\n\n        /* DO NOT use .r6-width-adjustable ~ .r6-width-adjustable  => very laggy */\n\n        /*\n        yt-live-chat-ticker-renderer {\n          --r6-transition-duration: 0.2s;\n        }\n\n        .r6-width-adjustable {\n          --r6-transition-duration-v: var(--r6-transition-duration);\n          transition: var(--r6-transition-duration-v);\n        }\n\n        .r6-width-adjustable-f {\n          --r6-transition-duration-v: 0s;\n        }\n\n        .r6-closing-ticker[class] {\n          --r6-transition-duration-v: var(--r6-transition-duration);\n        }\n          */\n\n\n\n        .r6-width-adjustable {\n          --r6-min-width: 0;\n          min-width: var(--r6-min-width);\n        }\n\n        .r6-width-adjustable-f {\n          --r6-min-width: max-content;\n        }\n\n        .r6-closing-ticker[class] {\n          --r6-min-width: 0;\n        }\n\n  \n\n  `,h&&c.resolve().then(e))}}})(),{setupStyle:Ie}=(()=>{const e=Symbol();return{setupStyle:(t,n)=>{const o={transform:"",height:"",minHeight:"",paddingBottom:"",paddingTop:""},i=t=>function(){return this[e][t](...arguments)};for(const e of["toString","getPropertyPriority","getPropertyValue","item","removeProperty","setProperty"])o[e]=i(e);const s=(r=o,{get:(t,n)=>n in r?r[n]:n===e?t:t[n],set:(e,t,n)=>(t in r||(e[t]=n),!0),has:(e,t)=>t in e,deleteProperty:(e,t)=>!0,ownKeys:e=>Object.keys(e),defineProperty:(e,t,n)=>Object.defineProperty(e,t,n),getOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t)});var r;const a=new Proxy(t.style,s),l=new Proxy(n.style,s);Object.defineProperty(t,"style",{get:()=>a,set(){},enumerable:!0,configurable:!0}),Object.defineProperty(n,"style",{get:()=>l,set(){},enumerable:!0,configurable:!0}),t.removeAttribute("style"),n.removeAttribute("style")}}})();function Re(e){const{baseObject:t,thumbnails:n,flag0:o,imageLinks:i}=e;if((o||i)&&n&&n.length>0)if(o>0&&n.length>1){let e=0,s=[];for(const t of n){if(!t||!t.url)continue;const n=t.width===t.height&&"number"==typeof t.width,r=e<=0||(1===o?e>t.width:e<t.width),a=!n||t.width>=48;n&&!r||!a||(s.push(t),i&&i.add(t.url)),n&&r&&a&&(e=t.width)}n.length!==s.length&&n===t.thumbnails&&s.length>0?t.thumbnails=s:s.length=0,s=null}else for(const e of n)e&&e.url&&i&&i.add(e.url)}function Me(e,t){const n=(e||0).liveChatTextMessageRenderer||0;if(n){const e=(n.message||0).runs||0;if(e&&e.length>0)for(const n of e){const e=((n||0).emoji||0).image||0;Re({baseObject:e,thumbnails:e.thumbnails,flag0:1,imageLinks:t})}const o=n.authorPhoto||0;Re({baseObject:o,thumbnails:o.thumbnails,flag0:1,imageLinks:t})}}let xe=null;const Oe=new v(512),Ne=new v(68);function De(e,t,n,o){return new c((i=>{e||(e=document.createElement("link")),e.rel=t,o&&e.setAttribute("as",o),e.onload=function(){i({link:this,success:!0}),this.remove()},e.onerror=function(){i({link:this,success:!1}),this.remove()},e.href=n,document.head.appendChild(e),e=null}))}let Le=null;const Fe=`xoIcj${Math.floor(314159265359*Math.random()+314159265359).toString(36)}`,Be=window.postMessage.bind(window,Fe);window.addEventListener("message",(e=>{if((e||0).data===Fe){const e=Le;null!==e&&(Le=null,e.resolve())}}));const Pe=async()=>{let e=Le;null===e&&(e=Le=new C,Be()),await e.then()};(async e=>{const t=requestAnimationFrame;try{let n=16;const o="vanillajs-iframe-v1";let i=document.getElementById(o),s=null;if(!i){i=document.createElement("iframe"),i.id=o;const r="function"==typeof webkitCancelAnimationFrame&&"undefined"==typeof kagi?i.src=URL.createObjectURL(new Blob([],{type:"text/html"})):null;i.sandbox="allow-same-origin";let a=document.createElement("noscript");for(a.appendChild(i);!document.documentElement&&n-- >0;)await new c(t);document.documentElement.appendChild(a),r&&c.resolve().then((()=>URL.revokeObjectURL(r))),s=t=>{const n=o=>{o&&e.removeEventListener("DOMContentLoaded",n,!1),o=a,a=e=s=0,t?t((()=>o.remove()),200):o.remove()};t&&"loading"===document.readyState?e.addEventListener("DOMContentLoaded",n,!1):n()}}for(;!i.contentWindow&&n-- >0;)await new c(t);const r=i.contentWindow;if(!r)throw"window is not found.";try{const{requestAnimationFrame:t,setTimeout:n,cancelAnimationFrame:o,setInterval:i,clearInterval:a,getComputedStyle:l}=r,d={requestAnimationFrame:t,setTimeout:n,cancelAnimationFrame:o,setInterval:i,clearInterval:a,getComputedStyle:l};for(let t in d)d[t]=d[t].bind(e);s&&c.resolve(d.setTimeout).then(s);const h=r.HTMLElement.prototype,u=r.EventTarget.prototype;return{...d,animate:h.animate,addEventListener:u.addEventListener,removeEventListener:u.removeEventListener}}catch(e){return s&&s(),null}}catch(e){return console.warn(e),null}})(_).then((e=>{if(!e)return null;const{requestAnimationFrame:n,setTimeout:o,cancelAnimationFrame:i,setInterval:s,clearInterval:a,animate:h,getComputedStyle:u,addEventListener:p,removeEventListener:m}=e,f=(new t,(()=>{try{const e=document.createElement("canvas");return!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}})()),v=(()=>{if(f)return null;const e=Object.getOwnPropertyDescriptor(Document.prototype,"visibilityState");if(!e||"function"!=typeof e.get)return null;const t=e.get;let n=null,i="hidden"===t.call(document);return l.call(document,"visibilitychange",(e=>{const o="hidden"===t.call(document);i!==o&&(i=o,!i&&n&&(n=n.resolve()))})),()=>{if(n)return n;const e=(!i&&o((()=>{i||n!==e||(n=n.resolve())})),n=new C);return e}})();let H=null;const j=()=>H||(H=new c((e=>{n((t=>{H=null,e(t)}))}))),K=v||j,G=v||(void 0===r?j:(()=>{const e=new t,n=Symbol(),o=(e,t)=>{const o=t[n],i=o.resolve;let s;i&&(s=((e?e[0]:0)||0).target)instanceof Element&&(o.resolve=null,t.unobserve(s),i())};return t=>{let i=e.get(t);i||(i=new r(o),e.set(t,i));let s=i[n];return s||(s=i[n]=new C,i.observe(t)),s}})());let ee=null,ne=null,ae=null,le=0,ce=!1,he=!1,ue=0,pe=null;const fe=new t;let Se=Date.now()-2e3;const Re=()=>Date.now()-Se;let Le=0,Fe=0,Be=!1,$e=0,He=0,qe=!1,je=0,Ke=null,Ge=null;new c((e=>{"loading"!==document.readyState?e():_.addEventListener("DOMContentLoaded",e,!1)})).then((()=>{const e=["https://www.youtube.com","https://googlevideo.com","https://googleapis.com","https://accounts.youtube.com","https://www.gstatic.com","https://ggpht.com","https://yt3.ggpht.com","https://yt4.ggpht.com"],t=["https://youtube.com","https://fonts.googleapis.com","https://fonts.gstatic.com"];let n=null;function o(){n=document.createElement("link"),xe=n.relList&&n.relList.supports?(n.relList.supports("dns-prefetch")?1:0)+(n.relList.supports("preconnect")?2:0)+(n.relList.supports("prefetch")?4:0)+(n.relList.supports("subresource")?8:0)+(n.relList.supports("preload")?16:0):0,_e("YouTube Super Fast Chat"," | PREFETCH SUPPORTS"),de.log("dns-prefetch",1&xe?"OK":"NG"),de.log("preconnect",2&xe?"OK":"NG"),de.log("prefetch",4&xe?"OK":"NG"),de.log("preload",16&xe?"OK":"NG"),me()}for(const t of e)null===xe&&o(),2&xe&&(De(n,"preconnect",t),n=null);for(const e of t)null===xe&&o(),1&xe&&(De(n,"dns-prefetch",e),n=null)}));const{notifyPath7081:Ue}=(()=>{const e=new w;let t=0,o=0,i=-1;const s=(e,t)=>{const n=new Set(t);return e.map((e=>n.has(e)))};let r=null;class a{constructor(e,t,n){this.index=e,this.addedCount=t,this.removed=n}get __proxy312__(){return 1}get type(){return"splice"}get object(){return be(r)}}function l(e){return e.map((e=>{if(!e||"object"!=typeof e)return console.warn("Error(0xFA41): convertToIds",e),e;let t=Object.keys(e);if(1!==t.length)return console.warn("Error(0xFA42): convertToIds",e),e;let n=e[t[0]]||0,o=n.authorName||0,i=`${o.simpleText||o.text}`,s=e;return"string"!=typeof i?console.warn("Error(0xFA53): convertToIds",e):(i=`${n.authorExternalChannelId||"null"}|${i||""}`,i.length>1&&(s=i)),s}))}const d=(e,t)=>e.authorName!==t.authorName||(e.authorPhoto!==t.authorPhoto||e.authorBadges!==t.authorBadges);return{notifyPath7081:function(h){if("participantsManager.participants"!==h)return this.__notifyPath5036__.apply(this,arguments);if(i===o)return;t>1e8&&(t%=100);let u=++t;const p=ve(this);e.lockWith((e=>{const h=be(p),_=((h||0).participantsManager||0).participants||0;if(u!==t||!h||"function"!=typeof(_||0).splice)return void e();let m=!1;if(_.r94dm||(_.r94dm=1,o=1+(1073741823&o),_.push=function(){return o=1+(1073741823&o),Array.prototype.push.apply(this,arguments)},_.pop=function(){return o=1+(1073741823&o),Array.prototype.pop.apply(this,arguments)},_.shift=function(){return o=1+(1073741823&o),Array.prototype.shift.apply(this,arguments)},_.unshift=function(){return o=1+(1073741823&o),Array.prototype.unshift.apply(this,arguments)},_.splice=function(){return o=1+(1073741823&o),Array.prototype.splice.apply(this,arguments)},_.sort=function(){return o=1+(1073741823&o),Array.prototype.sort.apply(this,arguments)},_.reverse=function(){return o=1+(1073741823&o),Array.prototype.reverse.apply(this,arguments)}),i!==o&&(i=o,m=!0),!m)return void e();const f=_.slice(0),y=fe.get(h)||[];fe.set(h,f);const g=(async()=>{if(0===y.length)return 0;let e=h.__getAllParticipantsDOMRenderedLength__();if(y.length!==e)return 0;const t=l(y),n=l(f);let{indexSplices:o,contentUpdates:i}=((e,t,n,o)=>{let i=s(o,n),l=s(n,o);const c=i.length,d=l.length,h=[],u=[];r=null;for(let s=0,r=0;s<d||r<c;)if(e[s]===t[r])s++,r++;else if(n[s]===o[r])u.push({indexI:s,indexJ:r}),s++,r++;else{let t=0;for(let e=r;e<c&&!1===i[e];e++)t++;let n=0;for(let e=s;e<d&&!1===l[e];e++)n++;if(!t&&!n)throw"ERROR(0xFF32): spliceIndicesFunc";const o=new a(r,t,n>=1?e.slice(s,s+n):[]);h.push(o),s+=n,r+=t}return l=null,i=null,n=null,o=null,e=null,r=h.length>0?ve(t):null,t=null,{indexSplices:h,contentUpdates:u}})(y,f,t,n),u=1;if(o.length>=1){await new c((e=>{h.resolveForDOMRendering781=e,h.__notifyPath5036__("participantsManager.participants.splices",{indexSplices:o}),o=null,r=null,h.__notifyPath5036__("participantsManager.participants.length",f.length)})),"function"!=typeof nextBrowserTick?await c.resolve(0):await new c((e=>nextBrowserTick(e))).then(),e=h.__getAllParticipantsDOMRenderedLength__();if(f.length!==e)return console.warn("ERROR(0xE2C3): notifyPath7081",y.length,f.length,doms.length),0;u=6}else if(o=null,r=null,f.length!==e)return 0;if(i.length>=1)for(const e of i){d(y[e.indexI],f[e.indexJ])&&(h.__notifyPath5036__(`participantsManager.participants[${e.indexJ}]`),u|=12)}return i=null,u})();g.then((async t=>{const o=0===t?1:4&~t?0:2;1===o&&await new c((e=>{h.resolveForDOMRendering781=e,h.__notifyPath5036__("participantsManager.participants")})),2===o&&await new c(n),e()}))}))}}})(),ze=async e=>{const t=[...new Set(e)],n=t.length,o=new Array(n);for(let e=0;e<n;e++)o[e]=customElements.whenDefined(t[e]);return await c.all(o),o.length=0,t},We=()=>{function e(e,t,n){}function t(e,t,n){}customElements.whenDefined("yt-live-chat-participant-list-renderer").then((()=>{const n="yt-live-chat-participant-list-renderer",o=V(document.createElement(n));if(!o||"function"!=typeof o.attached)return void console.warn(`proto.attached for ${n} is unavailable.`);_e("YouTube Super Fast Chat"," | yt-live-chat-participant-list-renderer hacks");const i=["kevlar_tuner_should_test_maintain_stable_list","kevlar_should_maintain_stable_list","kevlar_tuner_should_test_reuse_components","kevlar_tuner_should_reuse_components"],s={};for(const e of i)s[e]=void 0;try{const e=ytcfg.data_.EXPERIMENT_FLAGS;for(const t of i)s[t]=e[t]}catch(e){}de.log(`EXPERIMENT_FLAGS: ${JSON.stringify(s,null,2)}`);const r=(()=>{if("function"!=typeof o.__notifyPath5035__||"dummy5035"===o.__notifyPath5035__.name)if("function"!=typeof o.__attached411__||"dummy411"===o.__attached411__.name)if(o.__notifyPath5035__=e,o.__attached411__=t,"function"==typeof o.flushRenderStamperComponentBindings_&&0===o.flushRenderStamperComponentBindings_.length)if("function"!=typeof o.flushRenderStamperComponentBindings66_){if("function"!=typeof o.__getAllParticipantsDOMRenderedLength__)return!0;console.warn("ERROR(0xE357): cProto.__getAllParticipantsDOMRenderedLength__")}else console.warn("ERROR(0xE356): cProto.flushRenderStamperComponentBindings66_");else console.warn("ERROR(0xE355): cProto.flushRenderStamperComponentBindings_ not found");else console.warn("YouTube Live Chat Tamer is running.");else console.warn("YouTube Live Chat Tamer is running.")})();if(de.log(`Data Manipulation Boost = ${r}`),X((()=>J(o.attached,"0.32.22"))),"function"==typeof o.flushRenderStamperComponentBindings_){const e=J(o.flushRenderStamperComponentBindings_);de.log(`flushRenderStamperComponentBindings_ ### ${e} ###`)}else de.log("flushRenderStamperComponentBindings_ - not found");"function"==typeof o.flushRenderStamperComponentBindings_&&(o.flushRenderStamperComponentBindings66_=o.flushRenderStamperComponentBindings_,o.flushRenderStamperComponentBindings_=function(){this.flushRenderStamperComponentBindings66_(),this.resolveForDOMRendering781&&(this.resolveForDOMRendering781(),this.resolveForDOMRendering781=null)}),o.__getAllParticipantsDOMRenderedLength__=function(){const e=((this||0).$||0).participants;return e?HTMLElement.prototype.querySelectorAll.call(e,"yt-live-chat-participant-renderer").length:0};const a=[...document.querySelectorAll("yt-live-chat-participant-list-renderer:not(.n9fJ3)")];o.__attached412__=o.attached;const l=function(e){const t=W(e);if(fe.has(t))return;if(e.classList.add("n9fJ3"),X((()=>!0===t.__dataEnabled&&!0===t.__dataReady)),"function"!=typeof t.notifyPath||void 0!==t.__notifyPath5036__)return void console.warn("ERROR(0xE318): yt-live-chat-participant-list-renderer");_e("Participant List attached",""),t.__notifyPath5036__=t.notifyPath;const n=(t.participantsManager||0).participants||0;X((()=>n.length>-1&&"function"==typeof n.slice)),de.log(`initial number of participants: ${n.length}`);const o=n.length>=1&&"function"==typeof n.slice?n.slice(0):[];fe.set(t,o),t.notifyPath=Ue,de.log("CHECK_CHANGE_TO_PARTICIPANT_RENDERER_CONTENT = true"),me()};o.attached=function(){l(this.hostElement||this),this.__attached412__.apply(this,arguments)};{let e=!0;if("function"==typeof o.stampDomArray_&&6===o.stampDomArray_.length&&!o.stampDomArray_.nIegT&&!o.stampDomArray66_){let t=0;o.stampDomArray66_=o.stampDomArray_,o.stampDomArray_=function(...n){if(n[0]&&n[0].length>0&&"participants"===n[1]&&n[2]&&!0===n[3]&&!n[5]){"function"==typeof e&&(e=e()),n[5]=e;let o=Date.now();o-t>440&&(t=o,console.log("maintain_stable_list for participants list",e))}return this.stampDomArray66_.apply(this,n)},o.stampDomArray_.nIegT=1}de.log("ENABLE_FLAGS_MAINTAIN_STABLE_LIST_FOR_PARTICIPANTS_LIST - OK")}if(me(),a.length>=1)for(const e of a)!0===W(e).isAttached&&l(e)})).catch(console.warn)};ye.then(We);const Ve=new class{constructor(){this.startAt=8170,this.counter=0,this.rid=0,this.funcs=new Map;const e=this.funcs;this.bCallback=this.mCallback.bind(this),this.pClear=()=>e.clear(),this.keepRAF=!1}mCallback(e){this.rid=0,c.resolve().then(this.pClear),this.funcs.forEach((t=>c.resolve(e).then(t).catch(console.warn)))}request(e){const t=this.startAt+(this.counter=1+(1073741823&this.counter));return this.funcs.set(t,e),0===this.rid&&(this.rid=n(this.bCallback)),t}cancel(e){if((e=+e)>0){if(e<=this.startAt)return i(e);this.rid>0&&(this.funcs.delete(e),0!==this.funcs.size||this.keepRAF||(i(this.rid),this.rid=0))}}},Ye=new WeakSet,Xe=new t;let Je=0;const Qe="function"!=typeof r||{capture:!0,passive:!0},Ze=e=>{if(Je>0&&e.propertyName&&!e.pseudoElement){const t=e.target,n=Xe.get(t);n&&(Xe.delete(t),n.resolve(e.propertyName))}};if("function"==typeof Object.getOwnPropertyDescriptor&&"undefined"!=typeof Proxy){let st=!1;const rt=HTMLDivElement.prototype,at=function(e,t,n){return W(this).set(e,t,n)},lt=function(e,t){return W(this).set(e,t)},ct=function(){console.log("dummyFn",...arguments)},dt=new Map;function ht(e){const t=e.is;if(t&&!e.set){let n=dt.get(t);if(!n){n=1;const o=W(e);if(o!==e&&o&&"function"==typeof o.set){const e=o.constructor.prototype.set;e&&"function"==typeof e&&3===e.length?n=at:e&&"function"==typeof e&&2===e.length&&(n=lt)}dt.set(t,n)}e.set="function"==typeof n?n:ct}}if(!rt.__children577__&&!rt.__children578__){const ut=Object.getOwnPropertyDescriptor(Element.prototype,"children"),pt=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"children"),_t=Object.getOwnPropertyDescriptor(rt,"children");if(ut&&!0===ut.configurable&&!0===ut.enumerable&&"function"==typeof ut.get&&!pt&&!_t&&rt instanceof HTMLElement&&rt instanceof Element){let mt=Object.assign({},ut);rt.__children577__=ut.get,rt.__children578__=function(){if(this.__children803__)return this.__children803__;if(this.__children801__){let e=[];for(let t=this.firstElementChild;null!==t;t=t.nextElementSibling)t.is&&(ht(t),e.push(t));return 2===this.__children801__&&(this.__children803__=e),e}return 577},mt.get=function(){const e=this.__children578__();return 577!==e?e:this.__children577__()},Object.defineProperty(rt,"children",mt),st=!0}}st||console.log("fixChildrenIssue - set NG")}const et=()=>{const e=e=>{const t=be(e);return t&&t.isConnected?t:null},t=()=>{c.resolve().then((()=>{const t=document.querySelector("#show-more[disabled]");let n=t?ve(t):null,o=null;for(const e of document.querySelectorAll("[wSr93]"))"visible"===e.getAttribute("wSr93")&&(o=ve(e)),e.setAttribute("wSr93","");K().then((()=>{const t=e(n);if(n=null,t)t.click();else{const t=e(o);o=null,t&&c.resolve().then((()=>t.scrollIntoView())).then((()=>t.scrollIntoView(!1))).then((()=>t.scrollIntoView({behavior:"instant",block:"end",inline:"nearest"}))).catch((e=>{}))}}))}))},n=new MutationObserver((e=>{for(const n of e){if((n.addedNodes||0).length>=1)for(const e of n.addedNodes)if("STYLE"===e.nodeName)return void t();if((n.removedNodes||0).length>=1)for(const e of n.removedNodes)if("STYLE"===e.nodeName)return void t()}}));n.observe(document.documentElement,{childList:!0,subtree:!1}),n.observe(document.head,{childList:!0,subtree:!1}),n.observe(document.body,{childList:!0,subtree:!1})},{lcRendererElm:tt,visObserver:nt}=(()=>{let e=null;const t=()=>{let t=be(e);return t&&t.isConnected||(t=document.querySelector("yt-live-chat-item-list-renderer.yt-live-chat-renderer"),e=t?ve(t):null),t};let n=!1;const o=e=>{const o=e.target;if(!o)return;!0===e.isIntersecting&&e.intersectionRatio>.5?(o.setAttribute("wSr93","visible"),null===se(o)||n||(n=!0,K().then((()=>{const e=t();e&&("function"!=typeof nextBrowserTick?W(e).scrollToBottom_():nextBrowserTick((()=>{const t=W(e);!1!==t.isAttached&&!1!==(t.hostElement||t).isConnected&&t.scrollToBottom_()})))})))):"visible"===o.getAttribute("wSr93")&&o.setAttribute("wSr93","hidden")},i=new r((e=>{for(const t of e)c.resolve(t).then(o)}),{rootMargin:"0px",threshold:[.05,.95]});return{lcRendererElm:t,visObserver:i}})(),{setupMutObserver:ot}=(()=>{const e=e=>{let t=-1;const n=new Set;for(let o=re(e);null!==o;o=ie(o)){if(o.hasAttribute("wSr93")){t=parseInt(o.getAttribute("yt-chat-item-seq"),10);break}o.setAttribute("wSr93",""),nt.observe(o),n.add(o)}let o=n.values(),i=t+n.size;for(let e;e=o.next().value;)e.setAttribute("yt-chat-item-seq",i%60),e.classList.add("yt-chat-item-"+(i%2?"odd":"even")),i--;o=null,n.clear()},t=new MutationObserver((t=>{const n=(t[0]||0).target;n&&(Ge&&(Ge(),Ge=null),e(n))}));return{setupMutObserver:n=>{if(Ke=null,t.disconnect(),t.takeRecords(),n){if("function"==typeof n.__appendChild932__&&("function"==typeof n.appendChild&&(n.appendChild=n.__appendChild932__),"function"==typeof n.__shady_native_appendChild&&(n.__shady_native_appendChild=n.__appendChild932__)),t.observe(n,{childList:!0,subtree:!1}),e(n),te){let e=n,t=!1;e&&null===e.nextElementSibling&&(e.classList.add("no-anchor"),t=!0,e.parentNode.appendChild(document.createElement("item-anchor"))),t&&oe(n).classList.add("no-anchor")}(()=>{const e="yt-iframed-player-events-relay",t=document.createElement(e),n=V(t);if(n&&n.handlePostMessage_){if("function"==typeof n.handlePostMessage_&&!n.handlePostMessage66_&&!n.handlePostMessage67_){n.handlePostMessage66_=n.handlePostMessage_;const e=e=>{if(e&&"object"==typeof e)if("yt-player-state-change"in e){const t=e["yt-player-state-change"];let n=!1;2===t?(n=t!==ne,ne=2,le=0):3===t?(n=t!==ne,ne=3):1===t&&(n=t!==ne,ne=1),n&&ee!==ne&&(ce=!0,S=new c((e=>{const t=ne;K().then((()=>{t===ne&&ee!==ne&&(ee=ne),S=null,e()}))})).catch(console.warn))}else if("yt-player-video-progress"in e){const t=e["yt-player-video-progress"];le++,ae=t>0?t:0,A&&t>0&&le>=2&&(S?S.then((()=>{A&&A.resolve(),A=null})):(A.resolve(),A=null))}};n.handlePostMessage67_=function(t){let n=t.data;const o=ve(this);x=x.then((()=>{const i=be(o);if(!i||!t||!n)return;e(n),n=null;i.handlePostMessage66_(t);t=null})).catch(console.warn)};const t=e=>{const t=document.querySelector("yt-live-chat-renderer"),n=document.querySelector("yt-player-seek-continuation");if(t&&n&&t.replayBuffer_){const o=t.replayBuffer_.lastVideoOffsetTimeMsec,i=1e3*e["yt-player-video-progress"],s=(t.replayBuffer_.replayQueue||0).front_,r=(t.replayBuffer_.replayQueue||0).back_;s&&r&&o>i&&r.length>2&&r.some((e=>e&&+e.videoOffsetTimeMsec>i))&&r.some((e=>e&&+e.videoOffsetTimeMsec<i))||o<i+3400&&o>i-1200||(t.previousProgressSec=1e-5,t.replayBuffer_.clear(),n.fireSeekContinuation_(e["yt-player-video-progress"]))}};n.handlePostMessage_=function(e){let n=(e||0).data||0;const o=ve(this);if("object"==typeof n&&1!==ue){if(!he&&(he=!0,"yt-player-video-progress"in n)){ue=1;const i=t=>{const{origin:n}=e;return{origin:n,data:t}};return this.handlePostMessage67_(i({"yt-iframed-parent-ready":!0})),void(x=x.then((()=>{const i=be(o);if(!i||!e||!n)return;t(n),n=null,ue=2;i.handlePostMessage_(e);e=null})).catch(console.warn))}this.handlePostMessage67_(e)}}}}else console.warn(`proto.handlePostMessage_ for ${e} is unavailable.`)})()}}}})();ye.then((()=>{let e=!1;const s=()=>X((()=>location.pathname.startsWith("/live_chat")&&(location.search.indexOf("continuation=")>0||location.search.indexOf("v=")>0))),a=()=>{if(e)return;if(e=!0,!document.body||!document.head)return;if(!s())return;Te();let t=document.getElementById("elzm-fonts-yk75g");t&&t.parentNode!==document.body&&document.body.appendChild(t)};if(!s())return;const{weakWrap:l}=(()=>{const e="dtz02",t="dtz04",n="dtz08",o=t=>{if(!t)return null;const n=t[e];if(n){const e=n.ref;return(e?be(e):null)||null}return t},i={get:(e,n)=>n===t?e:Reflect.get(e,n),apply(e,t,n){if(t=o(t))return Reflect.apply(e,t,n)}},s={get(o,s){if(s===e)return o;const r=o.ref,a=be(r);return a?"function"!=typeof a[s]||a[s][t]||a[s][e]?a[s]:(a[s][n]||(a[s][n]=new Proxy(a[s],i)),a[s][n]):void 0},set(n,i,s){const r=be(n.ref);return!r||(s&&(s[t]||s[e])?(r[i]=s[t]||o(s),!0):(r[i]=s,!0))}};return window.getComputedStyle533||"function"!=typeof window.getComputedStyle||(window.getComputedStyle533=window.getComputedStyle,window.getComputedStyle=function(e,...t){return(e=o(e))?getComputedStyle533(e,...t):null}),{weakWrap:e=>(e=o(e))?new Proxy({ref:ve(e)},s):(console.error("thisArg is not found"),null)}})();document.documentElement&&document.head&&Te();const h=new WeakSet,u=e=>{if(!e||"object"!=typeof e)return!1;const t=g(e);if(!t)return!1;let n=e[t];if(!n||"object"!=typeof n)return!1;if("object"==typeof(n.item||0)&&"item"===g(n)){n=n.item;const e=g(n);e&&(n=n[e])}return n},_=[];let f=0;const v=(e,t)=>{const n=130095;if(e<n&&t<n)return e+t;return Math.round((e+t)/(1+e*t/898704e10))},x=e=>{if(f||(Ee||console.error("[yt-chat] preprocessChatLiveActions might fail because of no __LCRInjection__"),f=1),!e||!e.length)return e;if(h.has(e))return e;h.add(e);const n=Date.now();let o=null;const i=new t;{const t=_,n=e=>{const n=e-1e6,o=e+1e6;let i=!1,s=null,r=null,a=-1;for(let e=0,u=t.length;e<u;e++){const u=t[e],[p,_,m]=u;if(s>p){if(i){const n=t[r],o=v(n[2],m),i=m/(n[2]+m);n[0]+=(p-n[0])*i,n[1]+=(_-n[1])*i,n[2]=o,t[e]=null,a<0&&(a=e);continue}console.warn("logic ERROR"),t[e]=null,a<0&&(a=e);break}if(o<s)break;if(((l=n)<=(c=o)?c:l)>=((d=p)<=(h=_)?d:h)&&(d<=h?h:d)>=(l<=c?l:c)){i=!0;const l=p+1*(n-p)/(m+1);if(l<s){const i=t[r],l=v(v(i[2],m),1),c=m/(i[2]+m+1),d=1/(i[2]+m+1);i[0]+=(p-i[0])*c+(n-i[0])*d,s=i[1]+=(_-i[1])*c+(o-i[1])*d,i[2]=l,t[e]=null,a<0&&(a=e);continue}{const t=v(m,1);u[0]=l,u[1]=s=_+1*(o-_)/(m+1),u[2]=t,r=e}}else s=_,r=e}var l,c,d,h;a>=0&&function(e,t=0){let n=t;for(let o=t;o<e.length;o++)null!==e[o]&&(n!==o&&(e[n]=e[o]),n++);e.length=n}(t,a),i||((e,t)=>{let n=0;const o=e.length;let i=o;for(;n<i;){const o=n+i>>>1;e[o][0]<t[0]?n=o+1:i=o}n===o?e.push(t):e.splice(n,0,t)})(t,[n,o,1])};let s=0;for(let t=0,o=e.length;t<o;t++){const o=e[t],r=u(o);if(!1===r)continue;let a,l=r.timestampText,c=null,d=null,h=null;l&&l.simpleText&&(a=l.simpleText);let p,_=r.timestampUsec;if(_&&+_>11105532e8&&(p=+_),p>0&&!s){const e=Math.round(p/1e6);s=e-e%1e7,e-s<2e6&&(s-=1e7)}if(a&&p){let e;if(e=/^\s*(-?)(\d+):(\d+)\s*$/.exec(a)){let t=e[1]?-1:1,n=+e[2],o=+e[3];t>0&&n>=0&&o>=0?c=60*n+o:t<0&&n>=0&&o>=0&&(c=60*-n-o),null!==c&&(d=c-.5,h=c+.5)}else if(e=/^\s*(-?)(\d+):(\d+):(\d+)\s*$/.exec(a)){let t=e[1]?-1:1,n=+e[2],o=+e[3],i=+e[4];t>0&&n>=0&&o>=0&&i>=0?c=60*n*60+60*o+i:t<0&&n>=0&&o>=0&&i>=0&&(c=60*-n*60+60*-o-i),null!==c&&(d=c-.5,h=c+.5)}}if(null!==d&&null!==h&&p>0){let e=p-1e6*h,t=p-1e6*d;const o=(e+t)/2;let s=i.get(r);s||i.set(r,s={}),s.timestampUsecOriginal=p,s.t0au=e,s.t0bu=t,s.t0mu=o,n(o)}}o=t}const s=o.map((e=>{const[t,n]=e;return(t+n)/2})),r=new Map;for(let t=0,o=e.length;t<o;t++){const o=e[t],i=u(o);if(!1!==i&&(i.id&&!i.__timestampActionRequest__&&(i.__timestampActionRequest__=n),i.id&&i.__timestampActionRequest__>0&&i.durationSec>0&&i.fullDurationSec)){const e=i.__timestampActionRequest__-1e3*(i.fullDurationSec-i.durationSec);r.set(o,e)}}if(r.size>1){const t=[];let n=e.filter(((e,n)=>!!r.has(e)&&(t.push(n),!0))),o=n.sort(((e,t)=>r.get(e)-r.get(t)));for(let i=0,s=n.length;i<s;i++){e[t[i]]=o[i]}}{const t=new Map,n=[];let o=e.filter(((e,o)=>{const r=u(e);if(!r)return!1;const a=r.timestampText,l=+r.timestampUsec;if(!l||!a)return!1;let c;{const e=(e=>{const t=s.length;if(t<1)return null;if(!1===e)return null;const n=i.get(e);if(!n)return null;const{t0mu:o}=n;let r=0;if(t>=3){let e=0,n=t-1;for(;n-e>1;){const t=e+n>>>1;s[t]>=o?n=t:e=t}r=e}let a=-1,l=-1;for(let e=r;e<t;e++){const t=s[e]-o;if(t>=0){a=t;break}l=-t}const c=a,d=l;if(c>=0&&(d<0||c<=d))n.chosenT0=o+c;else{if(!(d>=0&&(c<0||d<=c)))return console.warn("logic error"),null;n.chosenT0=o-d}const h=n.timestampUsecOriginal-n.chosenT0;return n.timestampUsecAdjusted=h+11105532e8,h})(r);if(!Number.isFinite(e))return console.warn(`FIX_TIMESTAMP_FOR_REPLAY - no adjustmentTime for ${r.id}.${r.timestampUsec}`,r),!1;c=e}return n.push(o),t.set(e,c),!0}));if(t.size>1){let i=o.sort(((e,n)=>t.get(e)-t.get(n)));for(let t=0,s=o.length;t<s;t++){e[n[t]]=i[t]}}}return e};{console.log("[yt-chat-control] ATTEMPT_TICKER_ANIMATION_START_TIME_DETECTION is used.");const e=function(){const e=this.pop78();if(e&&(e.actions||0).length>=1&&e.videoOffsetTimeMsec)for(const t of e.actions){const n=t?"addChatItemAction"in t?"addChatItemAction":"addLiveChatTickerItemAction"in t?"addLiveChatTickerItemAction":null:null;if(n){const o=(t[n]||0).item;if("object"==typeof o){const t=g(o);if(t){const n=o[t];n&&"object"==typeof n&&(n.__videoOffsetTimeMsec__=e.videoOffsetTimeMsec,n.__progressAt__=O)}}}}return e},t={get(t,n,o){if("qe3"===n)return 1;const i=t[n];return"front_"===n&&i&&"number"==typeof i.length&&(i.pop78||(i.pop78=i.pop,i.pop=e)),i}},n=e=>{const n=V(e);n&&n.attached?"function"!=typeof n.playerProgressChanged_||n.playerProgressChanged32_||(n.playerProgressChanged32_=n.playerProgressChanged_,n.playerProgressChanged_=function(e,n,o){O=e,N=n,D=o;const i=this.replayBuffer_;if(i){const e=i.replayQueue;e&&"object"==typeof e&&!e.qe3&&(i.replayQueue=new Proxy(i.replayQueue,t))}return c.resolve().then(B),this.playerProgressChanged32_.apply(this,arguments)}):console.warn("proto.attached for yt-live-chat-renderer is unavailable.")};!Ee&&Ae.push(n),ke().then(n)}customElements.whenDefined("yt-live-chat-item-list-renderer").then((()=>{const e="yt-live-chat-item-list-renderer",t=document.createElement(e),n=V(t);if(!n||!n.attached)return void console.warn(`proto.attached for ${e} is unavailable.`);a(),_e("YouTube Super Fast Chat"," | yt-live-chat-item-list-renderer hacks"),de.log("[Begin]");const i=n,s=window._flag0281_;try{X((()=>"function"==typeof i.scrollToBottom_)),X((()=>"function"==typeof i.flushActiveItems_)),X((()=>"function"==typeof i.canScrollToBottom_)),X((()=>"function"==typeof i.setAtBottom)),X((()=>void 0===i.scrollToBottom66_)),X((()=>void 0===i.flushActiveItems66_))}catch(e){}try{X((()=>"function"==typeof i.attached)),X((()=>"function"==typeof i.detached)),X((()=>"function"==typeof i.canScrollToBottom_)),X((()=>"function"==typeof i.isSmoothScrollEnabled_)),X((()=>"function"==typeof i.maybeResizeScrollContainer_)),X((()=>"function"==typeof i.refreshOffsetContainerHeight_)),X((()=>"function"==typeof i.smoothScroll_)),X((()=>"function"==typeof i.resetSmoothScroll_))}catch(e){}i.__intermediate_delay__=null;let l=0,d=0,h=0,u=0,p=0,_=null;8192&s||(0===(i.clearList||0).length?(!(2&s)&&X((()=>J(i.clearList,"0.106.50"))),i.clearList66=i.clearList,i.clearList=function(){l=1+(1073741823&l),d=1+(1073741823&d),h=1+(1073741823&h),u=1+(1073741823&u),p=1+(1073741823&p),_=null,this.__intermediate_delay__=null,this.clearList66()},de.log("clearList","OK")):de.log("clearList","NG"));let m=!1;function f(e,t){if(!1===m){m=!0,c.resolve().then(et),Te();!(262144&~window._flag0281_)||(()=>{let e=0,t=-1,n=0;const o="function"!=typeof r||{capture:!0,passive:!0},i=()=>{const e=tt();if(e){const t=W(e);if(!t.hasUserJustInteracted11_)return;t.atBottom&&t.allowScroll&&t.activeItems_.length>=1&&t.hasUserJustInteracted11_()&&t.delayFlushActiveItemsAfterUserAction11_&&t.delayFlushActiveItemsAfterUserAction11_()}};document.addEventListener("scroll",(t=>{t&&t.isTrusted&&(e=1+(1073741823&e))}),o),document.addEventListener("wheel",(n=>{n&&n.isTrusted&&t!==e&&(t=e,Le=Re(),i&&i())}),o),document.addEventListener("mousedown",(e=>{e&&e.isTrusted&&"item-scroller"===((e||0).target||0).id&&(n=Re(),Be=!0,je=n)}),o),document.addEventListener("pointerdown",(e=>{e&&e.isTrusted&&"item-scroller"===((e||0).target||0).id&&(n=Re(),Be=!0,je=n)}),o),document.addEventListener("click",(e=>{e&&e.isTrusted&&"item-scroller"===((e||0).target||0).id&&(n=Fe=Re(),Be=!1,je=n,i&&i())}),o),document.addEventListener("tap",(e=>{e&&e.isTrusted&&"item-scroller"===((e||0).target||0).id&&(n=Fe=Re(),Be=!1,je=n,i&&i())}),o),document.addEventListener("mouseup",(e=>{e&&e.isTrusted&&Be&&(Fe=Re(),Be=!1,je=Fe,i&&i())}),o),document.addEventListener("pointerup",(e=>{e&&e.isTrusted&&Be&&(Fe=Re(),Be=!1,je=Fe,i&&i())}),o),document.addEventListener("touchstart",(e=>{e&&e.isTrusted&&($e=Re(),qe=!0,je=$e)}),o),document.addEventListener("touchmove",(e=>{e&&e.isTrusted&&($e=Re(),qe=!0,je=$e)}),o),document.addEventListener("touchend",(e=>{e&&e.isTrusted&&qe&&(He=Re(),qe=!1,je=He,i&&i())}),o),document.addEventListener("touchcancel",(e=>{e&&e.isTrusted&&qe&&(He=Re(),qe=!1,je=He,i&&i())}),o)})()}Ie(e,t),ot(t),console.log("[yt-chat] setupMutObserver DONE")}i.attached419=async function(){if(!this.isAttached)return;let e=16;for(;!(this.$&&this.$["item-scroller"]&&this.$["item-offset"]&&this.$.items);){if(--e<0||!this.isAttached)return;await G(this.hostElement).then()}if(!0!==this.isAttached)return;if(!this.$)return void console.warn("!this.$");if(!this.$)return;const t=this.$["item-scroller"],n=this.$["item-offset"],o=this.$.items;if(!t||!n||!o)return void console.warn("items.parentNode !== itemOffset");if(oe(o)!==n)return void console.warn("items.parentNode !== itemOffset");if("items"!==o.id||"item-offset"!==n.id)return void console.warn("id incorrect");HTMLElement.prototype.matches.call(o,"#item-offset.style-scope.yt-live-chat-item-list-renderer > #items.style-scope.yt-live-chat-item-list-renderer")?f(n,o):console.warn("!isTargetItems")},i.attached331=i.attached,i.attached=function(){return this.attached419&&this.attached419(),this.attached331()},i.detached331=i.detached,i.detached=function(){return ot(),this.detached331()};const y=document.querySelectorAll("yt-live-chat-item-list-renderer");for(const e of y)!0===W(e).isAttached&&e.attached419();if(2===(i.async||0).length&&1===(i.cancelAsync||0).length){X((()=>J(i.async,"2.24.15"))),X((()=>J(i.cancelAsync,"1.15.8")));const e=new Map;let t=6150;i.async66=i.async,i.async=function(n,o){const i=2===arguments.length,s=(new Error).stack.indexOf("flushActiveItems_")>=0;t>1e9&&(t=6159);const r=++t;return e.set(r,n),(this.__intermediate_delay__||c.resolve()).then((t=>{const n=e.get(r);if("function"!=typeof n)return;let a=!1;if(s&&(t<0||2===t&&arguments[0]===this.maybeScrollToBottom_)&&(a=!0),a)e.delete(r);else{const t=function(){return e.delete(r),n.apply(this,arguments)};e.set(r,i?this.async66(t,o):this.async66(t))}})),r},i.cancelAsync66=i.cancelAsync,i.cancelAsync=function(t){if(t<=6150)this.cancelAsync66(t);else if(e.has(t)){const n=e.get(t);e.delete(t),"function"!=typeof n&&this.cancelAsync66(n)}},de.log("async","OK")}else de.log("async","NG");if(2&s||(0===(i.showNewItems_||0).length?(X((()=>J(i.showNewItems_,"0.170.79"))),i.showNewItems66_=i.showNewItems_,i.showNewItems77_=async function(){let e=l=1+(1073741823&l);if(await G(this.hostElement).then(),e!==l)return;await c.resolve(),this.showNewItems66_(),await c.resolve()},i.showNewItems_=function(){const e=this;e.__intermediate_delay__=new c((t=>{e.showNewItems77_().then((()=>{t()}))}))},de.log("showNewItems_","OK")):de.log("showNewItems_","NG")),!(8192&s))if(0===(i.flushActiveItems_||0).length){if(!(2&s)){const e=J(i.flushActiveItems_);"0.158.86"===e||"0.156.86"===e||"0.150.84"===e||"0.137.81"===e||"0.138.81"===e||X((()=>J(i.flushActiveItems_,"0.158.86")))||Y("mclp.flushActiveItems_",i.flushActiveItems_)()}let e=0;i.flushActiveItems66a_=i.flushActiveItems_;let t=null;i.flushActiveItems66_=function(){const e=(this||0).visibleItems,n=e?e[e.length-1]:null,o=this.flushActiveItems66a_(),i=(this||0).visibleItems,s=i?i[i.length-1]:null;if(n!==s)try{const e=be(t),n=s?g(s):"",o=n&&s[n].id||null;if(o){let n=this.$.items.lastElementChild;for(;n instanceof HTMLElement&&n.id!==o;)n="__shady_native_previousElementSibling"in n?n.__shady_native_previousElementSibling:n.previousElementSibling;e&&e.classList.remove("cyt-chat-last-message"),n&&(n.classList.add("cyt-chat-last-message"),t=ve(n))}}catch(e){}return o};const n=e=>{let t=[];const n=new Set;for(const t of e)Me(t,n);if(null!==xe&&12&xe&&n.size>0){const e=8&xe?"subresource":16&xe?"preload":4&xe?"prefetch":"";e&&n.forEach((n=>{let o=!1;if(n.includes(".ggpht.com/"))return;const i=n.includes("/emoji/")?Oe:Ne;i.has(n)||(i.add(n),o=!0),o&&t.push(De(null,e,n,"image"))}))}return async()=>{t.length>0&&await c.race([new c((e=>o(e,250))),c.all(t)]),t.length=0,t=null}};i.flushActiveItems78_=async function(e){try{if(e!==d)return;if(!(4&~this._flag0281_)){const t=this;if(e!==d||!1===t.isAttached||!1===(t.hostElement||t).isConnected)return;const o=t.activeItems_;if(!o||0===o.length)return;if(d=1+(1073741823&d),p=1+(1073741823&p),o.length<25){const e=n(o);await e()}return t.flushActiveItems66_(),1}const t=this.data.maxItemsToDisplay944;let i=!1;const s=this;let r=s.__intermediate_delay__;if(await G(this.hostElement).then(),e!==d||!1===s.isAttached||!1===(s.hostElement||s).isConnected)return;if(!s.activeItems_||0===s.activeItems_.length)return;d=1+(1073741823&d),p=1+(1073741823&p);const a=this.data.maxItemsToDisplay,l=25;let h=!1;const u=this.activeItems_.length;u>a&&a>0&&(i=!0,_e("YouTube Super Fast Chat"," | flushActiveItems78_"),de.log("[Begin]"),de.log("this.activeItems_.length > N",u,a),t===a&&t!==l?(de.log("reduce maxitems"),a>l&&(h=!0,this.data.maxItemsToDisplay=l,de.log(`'maxItemsToDisplay' is reduced from ${a} to ${l}.`)),this.activeItems_.splice(0,u-this.data.maxItemsToDisplay),de.log("new this.activeItems_.length > N",this.activeItems_.length)):(this.activeItems_.splice(0,u-(a<900?a:900)),de.log("new this.activeItems_.length > N",this.activeItems_.length))),s.__intermediate_delay__=c.all([s.__intermediate_delay__||null,r||null]),await c.resolve();const _=s.activeItems_;_.length||console.warn("cnt.activeItems_.length = 0");const m=n(_),f=0===((s.visibleItems||0).length||0);await m(),s.flushActiveItems66_();const y=0===((s.visibleItems||0).length||0);await c.resolve(),h&&this.data.maxItemsToDisplay===l&&a>l?(this.data.maxItemsToDisplay=a,i&&de.log(`'maxItemsToDisplay' is restored from ${l} to ${a}.`)):h&&i&&de.log("'maxItemsToDisplay' cannot be restored",{maxItemsToDisplay:this.data.maxItemsToDisplay,reducedMaxItemsToDisplay:l,originalMaxItemsToDisplay:a}),i&&de.log("[End]"),i&&me(),f&&!y&&!(256&(s.__notRequired__||0))&&o((()=>s.setAtBottom()),1);{const e=s;if(!Ke){const t=e,n=()=>{const e=t.itemScroller;e&&!1!==e.isConnected&&!1!==t.isAttached&&(t.atBottom?0===e.scrollTop&&(e.scrollTop=e.scrollHeight):t.scrollToBottom_())};Ke="function"!=typeof nextBrowserTick?()=>c.resolve().then(n).then(n):()=>nextBrowserTick(n)}Ke()}return 1}catch(e){console.warn(e)}},i.flushActiveItems77_=function(){return new c((e=>{try{const t=this;let n=d=1+(1073741823&d);const o=t.hostElement||t;if(n!==d||!1===t.isAttached||!1===o.isConnected)return e();if(!t.activeItems_||0===t.activeItems_.length)return e();const i=this.data.maxItemsToDisplay944;this.activeItems_.length>4*i&&i>4&&this.activeItems_.splice(0,this.activeItems_.length-i-1),t.canScrollToBottom_()?t.mutexPromiseFA78=(t.mutexPromiseFA78||c.resolve()).then((()=>t.flushActiveItems78_(n))).then((t=>{e(t),e=null})).catch((t=>{console.warn(t),e&&e()})):(e(2),e=null)}catch(t){console.warn(t),e&&e()}}))},i.flushActiveItems_=function(){const t=this;if(0!==arguments.length||!t.activeItems_||!t.canScrollToBottom_)return t.flushActiveItems66_.apply(this,arguments);if(0===t.activeItems_.length)return void(t.__intermediate_delay__=null);const n=(t||0).data||0;void 0===n.maxItemsToDisplay944&&(n.maxItemsToDisplay944=null,n.maxItemsToDisplay>90&&(n.maxItemsToDisplay=90),n.maxItemsToDisplay944=n.maxItemsToDisplay||null),t.__intermediate_delay__=new c((n=>{t.flushActiveItems77_().then((o=>{if(1===o){if(n(1),1===e){e=0;const n=(t.$||0)["show-more"];n&&n.classList.remove("has-new-messages-miuzp")}}else if(2===o){if(n(2),0===e){e=1;const n=t.$["show-more"];n&&n.classList.add("has-new-messages-miuzp")}}else n(-1)})).catch((e=>{console.warn(e)}))}))},de.log("flushActiveItems_","OK")}else de.log("flushActiveItems_","NG");if(64&s||("function"!=typeof i.refreshOffsetContainerHeight_||i.refreshOffsetContainerHeight26_||0!==i.refreshOffsetContainerHeight_.length?de.log("refreshOffsetContainerHeight_","NG"):(X((()=>J(i.refreshOffsetContainerHeight_,"0.31.21"))),i.refreshOffsetContainerHeight26_=i.refreshOffsetContainerHeight_,i.refreshOffsetContainerHeight_=function(){},de.log("refreshOffsetContainerHeight_","OK"))),128&s||(i.delayFlushActiveItemsAfterUserAction11_=async function(){try{const e=p=1+(1073741823&p),t=()=>this.atBottom&&this.allowScroll&&e===p&&!0===this.isAttached&&this.activeItems_.length>=1&&!0===(this.hostElement||0).isConnected,n=()=>this.canScrollToBottom_();if(!t())return;if(n())return 1|this.flushActiveItems_();if(await new c((e=>o(e,80))),!t())return;if(n())return 1|this.flushActiveItems_();if(await G(this.hostElement).then(),n())return 1|this.flushActiveItems_()}catch(e){console.warn(e)}}),!(64&s))if(0===(i.atBottomChanged_||0).length){"0.75.37"===J(i.atBottomChanged_)||X((()=>J(i.atBottomChanged_,"0.75.37")));const e=HTMLElement.prototype.querySelector,t=t=>({querySelector:n=>e.call(t,n)});let n=0;i.__updateButtonVisibility371__=function(e){c.resolve(this).then((t=>{e.style.visibility=t.__buttonVisibility371__}))};const o=function(e,t){t.addEventListener("click",(t=>{t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),c.resolve(e).then((e=>{e.scrollToBottom_()}))}),!0)};i.atBottomChanged_=function(){let e=this.atBottom;const i=(this.$||0)["show-more"];if(i)if(e){if("hidden"!==this.__buttonVisibility371__&&(this.__buttonVisibility371__="hidden",!this.hideShowMoreAsync_)){const e=++n;this.hideShowMoreAsync_=K().then((()=>{e===n&&this.__updateButtonVisibility371__(i)}))}}else"visible"!==this.__buttonVisibility371__&&(this.__buttonVisibility371__="visible",this.hideShowMoreAsync_&&n++,this.hideShowMoreAsync_=null,i.__fix_onclick__||(i.__fix_onclick__=!0,o(this,i)),this.__updateButtonVisibility371__(i));else{let o=++n,i=this;e?this.hideShowMoreAsync_||(this.hideShowMoreAsync_=this.async((function(){o===n&&(t(i.hostElement).querySelector("#show-more").style.visibility="hidden")}),200)):(this.hideShowMoreAsync_&&this.cancelAsync(this.hideShowMoreAsync_),this.hideShowMoreAsync_=null,t(this.hostElement).querySelector("#show-more").style.visibility="visible")}},de.log("atBottomChanged_","OK")}else if(1===(i.atBottomChanged_||0).length){const e=J(i.atBottomChanged_);"1.73.37"===e||"1.75.39"===e||X((()=>J(i.atBottomChanged_,"1.73.37")));const t=HTMLElement.prototype.querySelector,n=e=>({querySelector:n=>t.call(e,n)});let o=0;i.__updateButtonVisibility371__=function(e){c.resolve(this).then((t=>{e.style.visibility=t.__buttonVisibility371__}))};const s=function(e,t){t.addEventListener("click",(t=>{t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),c.resolve(e).then((e=>{e.scrollToBottom_()}))}),!0)};i.atBottomChanged_=function(e){const t=(this.$||0)["show-more"];if(t)if(e){if("hidden"!==this.__buttonVisibility371__&&(this.__buttonVisibility371__="hidden",!this.hideShowMoreAsync_)){const e=++o;this.hideShowMoreAsync_=K().then((()=>{e===o&&this.__updateButtonVisibility371__(t)}))}}else"visible"!==this.__buttonVisibility371__&&(this.__buttonVisibility371__="visible",this.hideShowMoreAsync_&&o++,this.hideShowMoreAsync_=null,t.__fix_onclick__||(t.__fix_onclick__=!0,s(this,t)),this.__updateButtonVisibility371__(t));else{let t=++o,i=this;e?this.hideShowMoreAsync_||(this.hideShowMoreAsync_=this.async((function(){t===o&&(n(i.hostElement).querySelector("#show-more").style.visibility="hidden")}),200)):(this.hideShowMoreAsync_&&this.cancelAsync(this.hideShowMoreAsync_),this.hideShowMoreAsync_=null,n(this.hostElement).querySelector("#show-more").style.visibility="visible")}},de.log("atBottomChanged_","OK")}else de.log("atBottomChanged_","NG");if(2&s||(1===(i.onScrollItems_||0).length?(X((()=>J(i.onScrollItems_,"1.17.9"))),i.onScrollItems66_=i.onScrollItems_,i.onScrollItems77_=async function(e){let t=h=1+(1073741823&h);if(await G(this.hostElement).then(),t!==h)return;const n=this;await c.resolve();{const t=!!(512&(n.__notRequired__||0));await c.resolve().then((()=>{this.ytRendererBehavior.onScroll(e)})).then((()=>{if(!t){if(!this.canScrollToBottom_())return!(256&(n.__notRequired__||0))&&this.setAtBottom(),1;if(!this.hasUserJustInteracted11_||this.hasUserJustInteracted11_())return!(256&(n.__notRequired__||0))&&this.setAtBottom(),1}})).then((e=>{if(!t&&this.activeItems_.length){if(this.canScrollToBottom_())return this.flushActiveItems_(),e;if(this.atBottom&&this.allowScroll&&this.hasUserJustInteracted11_&&this.hasUserJustInteracted11_())return this.delayFlushActiveItemsAfterUserAction11_&&this.delayFlushActiveItemsAfterUserAction11_(),0}})).then((e=>{t||e&&!(256&(n.__notRequired__||0))&&this.setAtBottom()}))}await c.resolve()},i.onScrollItems_=function(e){const t=this;t.__intermediate_delay__=new c((n=>{t.onScrollItems77_(e).then((()=>{n()}))}))},de.log("onScrollItems_","OK")):de.log("onScrollItems_","NG")),!(2&s))if(1===(i.handleLiveChatActions_||0).length){const e=J(i.handleLiveChatActions_);"1.40.20"===e||"1.39.20"===e||"1.31.17"===e||X((()=>J(i.handleLiveChatActions_,"1.40.20")))||Y("mclp.handleLiveChatActions_",i.handleLiveChatActions_)(),i.handleLiveChatActions66_=i.handleLiveChatActions_,i.handleLiveChatActions77_=async function(e){if("number"!=typeof(e||0).length)return void this.handleLiveChatActions66_(e);let t=u=1+(1073741823&u);if(null===_?_=e:Array.prototype.push.apply(_,e),e=null,await G(this.hostElement).then(),t!==u||null===_)return;const n=_;_=null,await c.resolve(),this.handleLiveChatActions66_(n),await c.resolve()},i.handleLiveChatActions_=function(e){try{x(e)}catch(e){console.warn(e)}const t=this;t.__intermediate_delay__=new c((n=>{t.handleLiveChatActions77_(e).then((()=>{n()}))})),U()},de.log("handleLiveChatActions_","OK")}else de.log("handleLiveChatActions_","NG");!1===!(262144&~s)&&(i.hasUserJustInteracted11_=()=>{const e=Re();return e-Le<80||Be||qe||e-je<80},0!==(i.canScrollToBottom_||0).length||i.canScrollToBottom157_?de.log("canScrollToBottom_","NG"):(X((()=>J(i.canScrollToBottom_,"0.9.5"))),i.canScrollToBottom157_=i.canScrollToBottom_,i.canScrollToBottom_=function(){return this.canScrollToBottom157_()&&!this.hasUserJustInteracted11_()},de.log("canScrollToBottom_","OK"))),i.isSmoothScrollEnabled_=function(){return!1},i.maybeResizeScrollContainer_=function(){},i.refreshOffsetContainerHeight_=function(){},i.smoothScroll_=function(){},i.resetSmoothScroll_=function(){},de.log("ENABLE_NO_SMOOTH_TRANSFORM","OK"),8&s||"function"!=typeof i.forEachItem_||i.forEachItem66_||1!==i.forEachItem_.length||(i.forEachItem66_=i.forEachItem_,i.forEachItem_=function(e){if(!(8&~this._flag0281_))return this.forEachItem66_(e);try{let t=!1;if("function"==typeof e){const e=this.items;if(e instanceof HTMLDivElement){const n=this.visibleItems,o=this.activeItems_;n&&o&&n.length>=0&&o.length>=0&&(t=e)}}if(t){t.__children801__=1;const n=this.forEachItem66_(e);return t.__children801__=0,n}}catch(e){}return this.forEachItem66_(e)}),"function"!=typeof i.handleAddChatItemAction_||i.handleAddChatItemAction66_||(i.handleAddChatItemAction66_=i.handleAddChatItemAction_,i.handleAddChatItemAction_=function(e){try{e&&"object"==typeof e&&!("length"in e)&&(Me(e.item,null),console.assert(arguments[0]===e))}catch(e){console.warn(e)}let t;try{t=this.handleAddChatItemAction66_.apply(this,arguments)}catch(e){if(!e||!(e.message||"").includes(".querySelector("))throw e;console.log("skipErrorForhandleAddChatItemAction_",e.message)}return t}),de.log("handleAddChatItemAction_ [ FIX_THUMBNAIL_SIZE_ON_ITEM_ADDITION ]","OK"),"function"!=typeof i.handleReplaceChatItemAction_||i.handleReplaceChatItemAction66_||(i.handleReplaceChatItemAction66_=i.handleReplaceChatItemAction_,i.handleReplaceChatItemAction_=function(e){try{e&&"object"==typeof e&&!("length"in e)&&(Me(e.replacementItem,null),console.assert(arguments[0]===e))}catch(e){console.warn(e)}return this.handleReplaceChatItemAction66_.apply(this,arguments)}),de.log("handleReplaceChatItemAction_ [ FIX_THUMBNAIL_SIZE_ON_ITEM_REPLACEMENT ]","OK"),de.log("[End]"),me()})).catch(console.warn);const H=function(e,t){let n=(this.__dataHost||W(this).__dataHost||0).__data;if(2===arguments.length&&"style"===e&&n&&t){let o=`${t}`;const i=100*n.ratio;if(i>-1){let e=i;const t=n.data;if(t){const s=t.durationSec,r=t.fullDurationSec;let a=500;(s===r||s+1===r)&&s>1&&(a=r>400?500:r>200?200:r>100?100:r>50?50:20),a>500&&(a=500),a<5&&(a=5);const l=a/100;if(e=Math.round(e*l)/l,e=e.toFixed(1),o=o.replace(`${i}%`,`${e}%`).replace(`${i}%`,`${e}%`),n.__style_last__===o)return;n.__style_last__=o}}HTMLElement.prototype.setAttribute.call(this,e,o)}else HTMLElement.prototype.setAttribute.apply(this,arguments)},j=e=>{const t=W(e);X((()=>"string"==typeof(t||0).is)),X((()=>1===((t||0).hostElement||0).nodeType));const n=(t.$||0).container;n?(X((()=>1===(n||0).nodeType)),X((()=>"function"==typeof n.setAttribute)),n.setAttribute=H):console.warn(`"container" does not exist in ${t.is}`)},te=["yt-live-chat-ticker-renderer","yt-live-chat-ticker-paid-message-item-renderer","yt-live-chat-ticker-paid-sticker-item-renderer","yt-live-chat-ticker-sponsor-item-renderer"],ie=["yt-live-chat-ticker-renderer","yt-live-chat-ticker-paid-message-item-renderer","yt-live-chat-ticker-paid-sticker-item-renderer","yt-live-chat-ticker-sponsor-item-renderer"];c.all(te.map((e=>customElements.whenDefined(e)))).then((()=>{a(),_e("YouTube Super Fast Chat"," | yt-live-chat-ticker-... hacks"),de.log("[Begin]");let e=0;const n=function(e){if(e.hostElement&&"function"==typeof e.requestRemoval){try{(e.data||0).id||(e.data={id:1})}catch(e){}try{return e.requestRemoval(),!0}catch(e){}}return!1},o=new t,i=new r((e=>{for(const t of e){const e=t.target;i.unobserve(e);const{promise:n,values:s}=o.get(e)||{};n&&s&&(o.delete(e),s.width=t.boundingClientRect.width,n.resolve(s))}})),s=e=>{{const{promise:t,values:n}=o.get(e)||{};if(t)return t}const t=new C;return o.set(e,{promise:t,values:{}}),i.unobserve(e),i.observe(e),t},d=new t,h={updateStatsBarAndMaybeShowAnimationRevised:function(e,t,n){try{return this.__proxySelf0__||(this.__proxySelf0__=l(this)),this.updateStatsBarAndMaybeShowAnimation38.call(this.__proxySelf0__,e,t,n)}catch(e){console.log("updateStatsBarAndMaybeShowAnimationRevised ERROR"),console.error(e)}},detachedForMemoryLeakage:function(){try{this.actionHandlerBehavior.unregisterActionMap(this.behaviorActionMap)}catch(e){}return this.detached582MemoryLeak()},detachedForTickerInit:function(){c.resolve(this).then((e=>{e.isAttached||(!1===e.isAttached&&!1===((e.$||0).container||0).isConnected&&n(e),e.rafId>1&&Ve.cancel(e.rafId))})).catch(console.warn);const e=(this||0).hostElement;if((this||0).__isTickerItem58__&&e instanceof HTMLElement&&(e.style.removeProperty("--ticker-start-time"),e.style.removeProperty("--ticker-duration-time"),be(E)===e)){const e=document.querySelector(".r6-width-adjustable");e instanceof HTMLElement&&e.classList.contains("r6-width-adjustable-f")&&e.classList.remove("r6-width-adjustable-f"),E=ve(e)}let t;try{t=this.detached77()}catch(e){console.warn(e)}return this.__ticker_attachmentId__=0,t},attachedForTickerInit:function(){this.__ticker_attachmentId__=e=1+(1073741823&e);const t=(this||0).hostElement;if((this||0).__isTickerItem58__&&t instanceof HTMLElement){const e=be(E);e instanceof HTMLElement&&e.classList.add("r6-width-adjustable-f"),t.__fgvm573__?(t.classList.remove("r6-closing-ticker"),t.classList.remove("r6-width-adjustable-f")):(t.__fgvm573__=1,t.classList.add("r6-width-adjustable")),E=ve(t)}return j(t||this),this.attached77()},setContainerWidthNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=l(this)),this.setContainerWidth55.call(this.__proxySelf0__)}catch(e){console.log("setContainerWidthNoSelfLeakage ERROR"),console.error(e)}},slideDownNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=l(this)),this.slideDown55.call(this.__proxySelf0__)}catch(e){console.log("slideDownNoSelfLeakage ERROR"),console.error(e)}},collapseNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=l(this)),this.collapse55.call(this.__proxySelf0__)}catch(e){console.log("collapseNoSelfLeakage ERROR"),console.error(e)}},deletedChangedNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=l(this)),this.deletedChanged55.call(this.__proxySelf0__)}catch(e){console.log("deletedChangedNoSelfLeakage ERROR"),console.error(e)}},handlePauseReplayForPlaybackProgressState:function(){if(!ce)return this.handlePauseReplay66.apply(this,arguments);const e=this.__ticker_attachmentId__;if(!e)return;const t=ve(this);if(S){const n=this._Y7rtu=1+(1073741823&this._Y7rtu);S.then((()=>{const o=be(t)||0;e===o.__ticker_attachmentId__&&o.isAttached&&n===o._Y7rtu&&!S&&"function"==typeof o.handlePauseReplay&&o.hostElement&&o.handlePauseReplay.apply(o,arguments)}))}else if(2===ee&&this.isAttached){const n=this._Y7rtk=1+(1073741823&this._Y7rtk),o=le;K().then((()=>{const i=be(t);e===(i||0).__ticker_attachmentId__&&i.isAttached&&n===i._Y7rtk&&o===le&&2===ee&&ne===ee&&i.hostElement&&i.handlePauseReplay66()}))}},handleResumeReplayForPlaybackProgressState:function(){if(!ce)return this.handleResumeReplay66.apply(this,arguments);const e=this.__ticker_attachmentId__;if(!e)return;const t=ve(this);if(S){const n=this._Y7rtv=1+(1073741823&this._Y7rtv);S.then((()=>{const o=be(t);e===(o||0).__ticker_attachmentId__&&n===o._Y7rtv&&!S&&"function"==typeof o.handleResumeReplay&&o.hostElement&&o.handleResumeReplay.apply(o,arguments)}))}else if(1===ee&&this.isAttached){const n=le;A=A||new C,A.then((()=>{const o=be(t);e===(o||0).__ticker_attachmentId__&&le>n&&1===ee&&ne===ee&&o.hostElement&&o.handleResumeReplay66()}))}},handleReplayProgressForPlaybackProgressState:function(e){if(this.isAttached){const t=this.__ticker_attachmentId__;if(!t)return;const n=this._Y7rtk=1+(1073741823&this._Y7rtk),o=ve(be(this));K().then((()=>{const i=be(o);t===(i||0).__ticker_attachmentId__&&i.isAttached&&n===i._Y7rtk&&i.hostElement&&i.handleReplayProgress66(e)}))}}};let u=0;for(const e of ie){u++;const t=document.createElement(e),o=V(t);if(!o||!o.attached){de.warn(`proto.attached for ${e} is unavailable.`);continue}"function"!=typeof o.detached582MemoryLeak&&"function"==typeof o.detached&&(o.detached582MemoryLeak=o.detached,o.detached=h.detachedForMemoryLeakage),o.detached77=o.detached,o.detached=h.detachedForTickerInit,o.attached77=o.attached,o.attached=h.attachedForTickerInit;let i=0;"function"!=typeof o.updateStatsBarAndMaybeShowAnimation||o.updateStatsBarAndMaybeShowAnimation38||3!==o.updateStatsBarAndMaybeShowAnimation.length||(o.updateStatsBarAndMaybeShowAnimation38=o.updateStatsBarAndMaybeShowAnimation,o.updateStatsBarAndMaybeShowAnimation=h.updateStatsBarAndMaybeShowAnimationRevised,i|=2);let a=0;if("function"==typeof o.startCountdown&&"function"==typeof o.updateTimeout&&"function"==typeof o.isAnimationPausedChanged){const e=J(o.startCountdown,"2.66.37")&&J(o.updateTimeout,"1.76.45")&&J(o.isAnimationPausedChanged,"2.56.30");e||de.log("isTimingFunctionHackable = false"),a=e?2:1}else{let t=0;"function"==typeof o.startCountdown&&(t|=1),"function"==typeof o.updateTimeout&&(t|=2),"function"==typeof o.isAnimationPausedChanged&&(t|=4),de.log(`Skip Timing Function Modification[#${u}]: ${t} / 7`,` ${e}`)}let l=0;if("function"!=typeof o.handlePauseReplay||o.handlePauseReplay66||0!==o.handlePauseReplay.length)a>0&&de.log("Error for setting cProto.handlePauseReplay",e);else{const e=J(o.handlePauseReplay);l++,"0.8.2"===e||"0.12.4"===e||X((()=>J(o.handlePauseReplay,"0.12.4")))}"function"!=typeof o.handleResumeReplay||o.handleResumeReplay66||0!==o.handleResumeReplay.length?a>0&&de.log("Error for setting cProto.handleResumeReplay",e):(l++,X((()=>J(o.handleResumeReplay,"0.8.2")))),"function"!=typeof o.handleReplayProgress||o.handleReplayProgress66||1!==o.handleReplayProgress.length?a>0&&de.log("Error for setting cProto.handleReplayProgress",e):(l++,X((()=>J(o.handleReplayProgress,"1.16.13"))));const p=3===l&&!0;o.__ENABLE_VIDEO_PROGRESS_STATE_FIX_AND_URT_PASSED__=p,p&&(o._Y7rtk=0,o._Y7rtu=0,o._Y7rtv=0,o.handlePauseReplay66=o.handlePauseReplay,o.handlePauseReplay=h.handlePauseReplayForPlaybackProgressState,o.handleResumeReplay66=o.handleResumeReplay,o.handleResumeReplay=h.handleResumeReplayForPlaybackProgressState,o.handleReplayProgress66=o.handleReplayProgress,o.handleReplayProgress=h.handleReplayProgressForPlaybackProgressState),"function"!=typeof o.deletedChanged||o.deletedChanged55||0!==o.deletedChanged.length||(o.deletedChanged55=o.deletedChanged,o.deletedChanged=h.deletedChangedNoSelfLeakage,i|=32);const _=35;de.log(`FIX_MEMORY_LEAKAGE_TICKER_[#${u}]: ${i} / ${_}`,o.is);const m=!("function"!=typeof o.startCountdown||o.startCountdown49||2!==o.startCountdown.length||"function"!=typeof o.updateTimeout||o.updateTimeout49||1!==o.updateTimeout.length||"function"!=typeof o.isAnimationPausedChanged||o.isAnimationPausedChanged49||2!==o.isAnimationPausedChanged.length||"function"!=typeof o.setContainerWidth||0!==o.setContainerWidth.length||"function"!=typeof o.requestRemoval||o.requestRemoval49||0!==o.requestRemoval.length);if(CSS.supports("left","clamp(-100%, calc( -100% * ( var(--ticker-current-time) - var(--ticker-start-time) ) / var(--ticker-duration-time) ), 0%)"),m){document.documentElement.setAttribute("r6-advanced-ticking",""),de.log(`USE_ADVANCED_TICKING[#${u}]::START`);const e=h.wio2||(h.wio2=new r((t=>{for(const o of t)if(o.isIntersecting){const t=o.target;let i=t.id;if(!i)continue;let s=i.substring(0,i.length-2);if(!s)continue;const r=document.querySelector(`#${s}-b`);if(!r)continue;const a=r;e.unobserve(t),t.remove();let l=a||0,c=4;for(;(l=l.parentElement)instanceof HTMLElement;){if(l instanceof HTMLElement){const e=W(l);if(e&&"function"==typeof e.slideDown&&"function"==typeof e.setContainerWidth&&1===e.__advancedTicking038__){e.__advancedTicking038__=2;let t=!1;const o=((e||0).__data||0).data||(e||0).data||0;if(F&&o&&o.durationSec>0&&o.__timestampActionRequest__>0){o.__timestampActionRequest__+1e3*o.durationSec+280<Date.now()&&(t=!0)}else if(Ee&&!F&&o&&o.durationSec>0&&o.__progressAt__>0){o.__progressAt__+o.durationSec+.28<O&&(t=!0)}if(t)n(e);else{const t=e.hostElement.style.width;"auto"!==t&&""!==t||e.setContainerWidth(),e.slideDown()}break}}if(c--,!c){console.log("cnt not found for ticker-bg-overlay");break}}}}),{rootMargin:"0px",threshold:[1]})),t=h.u37fn||(h.u37fn=function(t){if(!1===t.__dataEnabled||!0===t.__dataInvalid)return;Ee||console.error("[yt-chat] USE_ADVANCED_TICKING fails because of no __LCRInjection__");const n=((t||0).__data||0).data||(t||0).data||0;if(!n)return;const o=t.hostElement;if(!(o instanceof HTMLElement))return;const i=n.fullDurationSec||n.durationSec||0;let s;Ee&&n&&i>0&&!("__progressAt__"in n)?(s=Date.now(),n.__liveTimestamp__=(n.__timestampActionRequest__||s)/1e3-P/1e3,F=!0):Ee&&n&&i>0&&n.__progressAt__>0&&(F=!1);let a=n.__progressAt__||n.__liveTimestamp__;if(!a)return void console.log("time property is not found");const l=s>0&&n.__timestampActionRequest__>0?s-n.__timestampActionRequest__:0;if(l>0&&(n.durationSec-=Math.floor(l/1e3),n.durationSec<0&&(n.durationSec=0),!n.durationSec)){try{t.requestRemoval()}catch(e){}return}let c=n.fullDurationSec-n.durationSec;c>0&&(a-=c);const h=`ticker-bg-overlay[ticker-id="${t.__ticker_attachmentId__}"]`,u=be(d.get(t));if((M(o,"--ticker-start-time",a)||!u||!1===u.isConnected)&&i>0){const s=t.parentComponent,l=s?s.hostElement||s:0;if(l&&(L=ve(l),q=!1,$?B():z()),!o.querySelector(h)){const s=o.querySelector("ticker-bg-overlay");s&&s.remove(),t.__advancedTicking038__=1;const c=u||document.createElement("ticker-bg-overlay");d.set(t,ve(c));const h=document.createElement("ticker-bg-overlay-end2"),p=t.colorFromDecimal(n.startBackgroundColor),_=t.colorFromDecimal(n.endBackgroundColor),m=t.$.container;c.setAttribute("ticker-id",`${t.__ticker_attachmentId__}`);const f=`ticker-${t.__ticker_attachmentId__}-${Math.floor(314159265359*Math.random()+314159265359).toString(36)}`;c.id=`${f}-b`,c.style.background=`linear-gradient(90deg, ${p},${p} 50%,${_} 50%,${_})`,m instanceof HTMLElement?we(m,c,m.firstChild):(we(o,c,o.firstChild),o.style.borderRadius="16px",m.style.borderRadius="initial"),m instanceof HTMLElement&&(m.style.background="transparent",m.style.backgroundColor="transparent"),M(o,"--ticker-duration-time",i),M(h,"--ticker-start-time",a),M(h,"--ticker-duration-time",i),h.id=`${f}-e`,Ce(l,h),e instanceof r&&e.observe(h)}}}),i=e=>{if(!e)return;if(!e.hostElement)return;e.__ticker_attachmentId__&&c.resolve(e).then(t)};if(o.__isTickerItem58__=1,o.startCountdown=h.startCountdownAdv||(h.startCountdownAdv=function(e,t){i(be(this))}),o.updateTimeout=h.updateTimeoutAdv||(h.updateTimeoutAdv=function(e){}),o.isAnimationPausedChanged=h.isAnimationPausedChangedAdv||(h.isAnimationPausedChangedAdv=function(e,t){}),"function"!=typeof o.slideDown||o.slideDown43||0!==o.slideDown.length?de.log(`USE_ADVANCED_TICKING[#${u}]::slideDown - NG`):(o.slideDown43=o.slideDown,o.slideDown=h.slideDownAdv||(h.slideDownAdv=async function(){if(this.__advancedTicking038__){1===this.__advancedTicking038__&&(this.__advancedTicking038__=2);const e=this.hostElement,t=this.$.container,n=W(this.parentComponent),o=n?n.hostElement:null;if(e instanceof HTMLElement&&t instanceof HTMLElement&&o instanceof HTMLElement){e.classList.add("r6-closing-ticker"),Ye.has(o)||(Ye.add(o),document.addEventListener("transitionend",Ze,Qe));const n=new C;return Xe.set(e,n),Xe.set(t,n),Je++,e.classList.add("sliding-down"),await n.then(),Je--,Xe.delete(e),Xe.delete(t),void(this&&this.hostElement instanceof HTMLElement&&this.collapse())}}this.slideDown43()}),de.log(`USE_ADVANCED_TICKING[#${u}]::slideDown - OK`)),"function"!=typeof o.collapse||o.collapse43||0!==o.collapse.length?de.log(`USE_ADVANCED_TICKING[#${u}]::collapse - NG`):(o.collapse43=o.collapse,o.collapse=h.collapseAdv||(h.collapseAdv=async function(){if(this.__advancedTicking038__){1===this.__advancedTicking038__&&(this.__advancedTicking038__=2);const e=this.hostElement,t=this.$.container,n=W(this.parentComponent),o=n?n.hostElement:null;if(e instanceof HTMLElement&&t instanceof HTMLElement&&o instanceof HTMLElement){e.classList.add("r6-closing-ticker"),Ye.has(o)||(Ye.add(o),document.addEventListener("transitionend",Ze,Qe));const n=new C;return Xe.set(e,n),Xe.set(t,n),Je++,e.classList.add("collapsing"),e.style.width="0",await n.then(),Je--,Xe.delete(e),Xe.delete(t),void(this&&this.hostElement instanceof HTMLElement&&this.requestRemoval())}}this.collapse43()}),de.log(`USE_ADVANCED_TICKING[#${u}]::collapse - OK`)),"function"!=typeof o.requestRemoval||o.requestRemoval49||0!==o.requestRemoval.length)de.log(`USE_ADVANCED_TICKING[#${u}]::requestRemoval - NG`);else{const t=[];let n=!1;const i=()=>{if(0!==t.length){for(const e of t){let t;try{t=e?.requestRemoval49()}catch(e){}void 0!==t&&!1===n&&(n=!0,console.log(`[yt-chat-ticker] requestRemoval49 returns ${t}`))}t.length=0}};o.requestRemoval49=o.requestRemoval,o.requestRemoval=h.requestRemovalAdv||(h.requestRemovalAdv=function(){const n=this.hostElement;if(this.__advancedTicking038__){try{const t=n.querySelector("ticker-bg-overlay[id]");if(t){const n=t.id,o=n?n.substring(0,n.length-2):"",i=o?document.querySelector(`#${o}-e`):null;i&&(e.unobserve(i),i.remove())}}catch(e){}this.__advancedTicking038__=2,n instanceof HTMLElement&&(n.style.removeProperty("--ticker-start-time"),n.style.removeProperty("--ticker-duration-time"));{const e=this.data;n instanceof HTMLElement&&e.id&&e.fullDurationSec&&!n.hasAttribute("__reuseid__")&&(n.setAttribute("__reuseid__",k),n.setAttribute("__nogc__",""),T.set(`<${this.is}>${e.id}:${e.fullDurationSec}`,ve(this)))}}if(n instanceof HTMLElement){try{n.classList.remove("r6-closing-ticker"),n.classList.remove("r6-width-adjustable-f")}catch(e){}t.push(this),Pe().then(i)}}),de.log(`USE_ADVANCED_TICKING[#${u}]::requestRemoval - OK`)}"function"!=typeof o.computeContainerStyle||o.computeContainerStyle49||2!==o.computeContainerStyle.length?de.log(`USE_ADVANCED_TICKING[#${u}]::computeContainerStyle - NG`):(o.computeContainerStyle49=o.computeContainerStyle,o.computeContainerStyle=h.computeContainerStyleAdv||(h.computeContainerStyleAdv=function(e,t){return this.__advancedTicking038__?"":this.computeContainerStyle49(e,t)}),de.log(`USE_ADVANCED_TICKING[#${u}]::computeContainerStyle - OK`)),"function"!=typeof o.setRevampContainerWidth||o.setRevampContainerWidth41||0!==o.setRevampContainerWidth.length||(o.setRevampContainerWidth41=o.setRevampContainerWidth,o.setRevampContainerWidth=h.setRevampContainerWidthAdv||(h.setRevampContainerWidthAdv=async function(){const e=(this||0).hostElement,t=this.$.container;let n=null;{let o=4;for(let i=e.getAttribute("r6-ticker-width")||"";o--;){const o=`${e.id}`;if(i&&i.startsWith(`${o}::`)){n=i.split("::");break}{const n=e.style.width;""!==n&&"auto"!==n&&(e.style.width="auto");const r=await s(t);if(r.width<1||!Number.isFinite(r.width))return;e.setAttribute("r6-ticker-width",i=`${o}::${r.width.toFixed(2)}`)}}}if(!n)return console.log("container width failure"),void this.setRevampContainerWidth41();if(((this||0).ytLiveChatTickerItemBehavior||0).shouldAnimateIn||(this||0).shouldAnimateIn||!1){const o=e.style.width;return"0px"!==o&&"0"!==o&&(e.style.width="0"),await s(t),void(e.style.width=`${n[1]}px`)}e.style.width=`${n[1]}px`}),de.log(`USE_ADVANCED_TICKING[#${u}]::setRevampContainerWidth - OK`)),"function"!=typeof o.setContainerWidth||o.setContainerWidth41||0!==o.setContainerWidth.length?de.log(`USE_ADVANCED_TICKING[#${u}]::setContainerWidth - NG`):(o.setContainerWidth41=o.setContainerWidth,o.setContainerWidth=h.setContainerWidthAdv||(h.setContainerWidthAdv=async function(){const e=(this||0).hostElement,t=this.$.container;let n=null;{let o=4;for(let i=e.getAttribute("r6-ticker-width")||"";o--;){const o=`${e.id}`;if(i&&i.startsWith(`${o}::`)){n=i.split("::");break}{const n=e.style.width;""!==n&&"auto"!==n&&(e.style.width="auto");const r=await s(t);if(r.width<1||!Number.isFinite(r.width))return;e.setAttribute("r6-ticker-width",i=`${o}::${r.width.toFixed(2)}`)}}}if(!n)return console.log("container width failure"),void this.setContainerWidth41();if(((this||0).ytLiveChatTickerItemBehavior||0).shouldAnimateIn||(this||0).shouldAnimateIn||!1){const o=e.style.width;return"0px"!==o&&"0"!==o&&(e.style.width="0"),await s(t),void(e.style.width=`${n[1]}px`)}e.style.width=`${n[1]}px`}),de.log(`USE_ADVANCED_TICKING[#${u}]::setContainerWidth - OK`))}else de.log(`USE_ADVANCED_TICKING[#${u}] is not injected.`)}const p=te.join(", "),_=document.querySelectorAll(p);if(_.length>=1)for(const e of _)!0===W(e).isAttached&&j(e);de.log("[End]"),me()})).catch(console.warn);{const e={dataChanged54500:function(){if("function"!=typeof(this.ytLiveChatTickerItemBehavior||0).setContainerWidth)return this.dataChanged544();try{return this.__proxySelf0__||(this.__proxySelf0__=l(this)),this.dataChanged544.call(this.__proxySelf0__)}catch(e){console.log("dataChanged54500 ERROR"),console.error(e)}},dataChanged54501:function(e){if("function"!=typeof(this.ytLiveChatTickerItemBehavior||0).setContainerWidth)return this.dataChanged544(e);try{return this.__proxySelf0__||(this.__proxySelf0__=l(this)),this.dataChanged544.call(this.__proxySelf0__,e)}catch(e){console.log("dataChanged54501 ERROR"),console.error(e)}}};for(const t of["yt-live-chat-ticker-sponsor-item-renderer","yt-live-chat-ticker-paid-sticker-item-renderer"].map((e=>[e,customElements.whenDefined(e)]))){const[n,o]=t;o.then((()=>{const t=document.createElement(n),o=V(t);o&&o.attached?o.dataChanged&&!o.dataChanged544&&"function"==typeof o.dataChanged&&o.dataChanged.length>=0&&o.dataChanged.length<=1&&(o.dataChanged544=o.dataChanged,0===o.dataChanged.length?o.dataChanged=e.dataChanged54500:1===o.dataChanged.length&&(o.dataChanged=e.dataChanged54501)):console.warn(`proto.attached for ${n} is unavailable.`)}))}}customElements.whenDefined("yt-live-chat-ticker-renderer").then((()=>{a(),_e("YouTube Super Fast Chat"," | yt-live-chat-ticker-renderer hacks"),de.log("[Begin]"),(()=>{const e="yt-live-chat-ticker-renderer",t=document.createElement(e),o=V(t);if(o&&o.attached)if("function"!=typeof o.createComponent_||3!==o.createComponent_.length||o.createComponent58_||(o.createComponent58_=o.createComponent_,o.createComponent_=function(e,t,n){const o=R(e,t,n);if(void 0!==o)return o;return this.createComponent58_(e,t,n)}),o.handleLiveChatActions47||"function"!=typeof o.handleLiveChatActions||1!==o.handleLiveChatActions.length?de.log("USE_ADVANCED_TICKING::handleLiveChatActions - NG"):(o.handleLiveChatActions47=o.handleLiveChatActions,o.handleLiveChatActions=function(e){try{x(e)}catch(e){console.warn(e)}return this.handleLiveChatActions47(e)},de.log("USE_ADVANCED_TICKING::handleLiveChatActions - OK")),"function"!=typeof o.keepScrollClamped||o.keepScrollClamped72||"0.17.10"!==J(o.keepScrollClamped)?(X((()=>J(o.keepScrollClamped,"0.17.10"))),de.log("RAF_FIX: keepScrollClamped",e,"NG")):(o.keepScrollClamped72=o.keepScrollClamped,o.keepScrollClamped=function(){const e=be(this);e&&e.hostElement&&(e._bound_keepScrollClamped=e._bound_keepScrollClamped||e.keepScrollClamped.bind(ve(e)),e.scrollClampRaf=n(e._bound_keepScrollClamped),e.maybeClampScroll())},de.log("RAF_FIX: keepScrollClamped",e,"OK")),"function"==typeof o.startScrolling&&"function"==typeof o.scrollIncrementally&&"|1.43.31|1.44.31|".indexOf("|"+J(o.startScrolling)+"|")>=0&&"|1.78.45|1.82.43|1.43.31|".indexOf("|"+J(o.scrollIncrementally)+"|")>=0?(o.startScrolling=function(e){const t=be(this);t&&t.hostElement&&(t.scrollStopHandle&&t.cancelAsync(t.scrollStopHandle),t.asyncHandle&&i(t.asyncHandle),t.lastFrameTimestamp=t.scrollStartTime=performance.now(),t.scrollRatePixelsPerSecond=e,t._bound_scrollIncrementally=t._bound_scrollIncrementally||t.scrollIncrementally.bind(ve(t)),t.asyncHandle=n(t._bound_scrollIncrementally))},o.__getTickerBarQuery__=function(){return"#items"===this.tickerBarQuery?this.$.items:this.hostElement.querySelector(this.tickerBarQuery)},o.scrollIncrementally=function(e){const t=be(this);if(!t)return;if(!t.hostElement)return;const o=e-(t.lastFrameTimestamp||0),i=t.scrollRatePixelsPerSecond,s=o/1e3*(i||0),r=t.__getTickerBarQuery__(),a=r.scrollLeft;if(t.lastFrameTimestamp==t.scrollStartTime);else if(s>-1e-5&&s<1e-5);else{(a>0&&i>0&&s>0||a>0&&i<0&&s<0||a<1e-5&&a>-1e-5&&i>0&&s>0)&&(r.scrollLeft+=s,t.maybeClampScroll(),t.updateArrows())}t.lastFrameTimestamp=e,t._bound_scrollIncrementally=t._bound_scrollIncrementally||t.scrollIncrementally.bind(ve(t)),0<r.scrollLeft||i&&0<i?t.asyncHandle=n(t._bound_scrollIncrementally):t.stopScrolling()},de.log("RAF_FIX: scrollIncrementally2",e,"OK")):(X((()=>J(o.startScrolling,"1.43.31")))||Y("cProto.startScrolling",o.startScrolling)(),X((()=>J(o.scrollIncrementally,"1.78.45")))||Y("cProto.scrollIncrementally",o.scrollIncrementally)(),de.log("RAF_FIX: scrollIncrementally",e,"NG")),"function"!=typeof o.attached||o.attached37||"function"!=typeof o.detached||o.detached37)de.log("CLOSE_TICKER_PINNED_MESSAGE_WHEN_HEADER_CLICKED - NG");else{o.attached37=o.attached,o.detached37=o.detached;let e=0;o.__naohzId__=0,o.attached=function(){return c.resolve(this).then((t=>{const n=t.hostElement||t;if(!(n instanceof HTMLElement))return;if(!HTMLElement.prototype.matches.call(n,".yt-live-chat-renderer"))return;const o=HTMLElement.prototype.closest.call(n,"iron-pages.yt-live-chat-renderer");o&&(t.__naohzId__&&m.call(o,"click",t.messageBoxClickHandlerForFade,{capture:!1,passive:!0}),t.__naohzId__=e=1+(1073741823&e),o.setAttribute("naohz",""+ +t.__naohzId__),p.call(o,"click",t.messageBoxClickHandlerForFade,{capture:!1,passive:!0}),t=null)})),this.attached37.apply(this,arguments)},o.detached=function(){return c.resolve(this).then((e=>{const t=document.querySelector(`iron-pages[naohz="${+e.__naohzId__}"]`);t&&(m.call(t,"click",e.messageBoxClickHandlerForFade,{capture:!1,passive:!0}),e=null)})),this.detached37.apply(this,arguments)};const t=e=>{e.click()};o.messageBoxClickHandlerForFade=async e=>{const n=(e||0).target||0;if(n)for(let o=n;o instanceof HTMLElement;o=oe(o)){const n=o.is;if("string"==typeof n&&n){if("yt-live-chat-pinned-message-renderer"===n)return;if("iron-pages"===n||"yt-live-chat-renderer"===n||"yt-live-chat-app"===n){const n=HTMLElement.prototype.querySelector.call(o,"yt-live-chat-pinned-message-renderer:not([hidden]) #fade");return void(n&&(c.resolve(n).then(t),e&&e.stopPropagation()))}if("yt-live-chat-ticker-renderer"!==n){if(n.startsWith("yt-live-chat-ticker-"))return;if(!n.endsWith("-renderer"))return}}else if((o.nodeName||"").includes("BUTTON"))return}},de.log("CLOSE_TICKER_PINNED_MESSAGE_WHEN_HEADER_CLICKED - OK")}else de.warn(`proto.attached for ${e} is unavailable.`)})(),de.log("[End]"),me()})).catch(console.warn),customElements.whenDefined("yt-live-chat-message-input-renderer").then((()=>{a(),_e("YouTube Super Fast Chat"," | yt-live-chat-message-input-renderer hacks"),de.log("[Begin]"),(()=>{const e="yt-live-chat-message-input-renderer",t=document.createElement(e),n=V(t);if(n&&n.attached){if(null!==Ve){let t=!1;"function"==typeof n.handleTimeout&&"function"==typeof n.updateTimeout&&(t=J(n.handleTimeout,"1.27.16")&&J(n.updateTimeout,"1.50.33"),t||de.log("doHack = false")),t?(n.handleTimeout=function(t){const n=be(this);n&&n.hostElement&&(console.log("cProto.handleTimeout",e),n.boundUpdateTimeout38_||(n.boundUpdateTimeout38_=n.updateTimeout.bind(ve(n))),n.timeoutDurationMs=n.timeoutMs=t,n.countdownRatio=1,0===n.lastTimeoutTimeMs&&Ve.request(n.boundUpdateTimeout38_))},n.updateTimeout=function(t){const n=be(this);n&&n.hostElement&&(console.log("cProto.updateTimeout",e),n.boundUpdateTimeout38_||(n.boundUpdateTimeout38_=n.updateTimeout.bind(ve(n))),n.lastTimeoutTimeMs&&(n.timeoutMs=Math.max(0,n.timeoutMs-(t-n.lastTimeoutTimeMs)),n.countdownRatio=n.timeoutMs/n.timeoutDurationMs),n.isAttached&&n.timeoutMs?(n.lastTimeoutTimeMs=t,Ve.request(n.boundUpdateTimeout38_)):n.lastTimeoutTimeMs=0)},de.log("RAF_HACK_INPUT_RENDERER",e,"OK")):(de.log("typeof handleTimeout",typeof n.handleTimeout),de.log("typeof updateTimeout",typeof n.updateTimeout),de.log("RAF_HACK_INPUT_RENDERER",e,"NG"))}"function"!=typeof n.onFocusedChanged||1!==n.onFocusedChanged.length||n.onFocusedChanged372||(n.onFocusedChanged372=n.onFocusedChanged,n.onFocusedChanged=function(e){c.resolve(this).then((t=>{!0===t.isAttached&&t.onFocusedChanged372(e),t=null})).catch(console.warn)})}else de.warn(`proto.attached for ${e} is unavailable.`)})(),de.log("[End]"),me()})),null!==Ve&&customElements.whenDefined("yt-emoji-picker-renderer").then((()=>{a(),_e("YouTube Super Fast Chat"," | yt-emoji-picker-renderer hacks"),de.log("[Begin]"),(()=>{const e="yt-emoji-picker-renderer",t=document.createElement(e),n=V(t);if(!n||!n.attached)return void de.warn(`proto.attached for ${e} is unavailable.`);let o=!1;if("function"==typeof n.animateScroll_?(de.log("animateScroll_: function - OK"),o=J(n.animateScroll_,"1.102.49")):de.log("animateScroll_",typeof n.animateScroll_),o){const t=HTMLElement.prototype.querySelector,o=e=>({querySelector:n=>t.call(e,n)});n.animateScroll_=function(e){const t=be(this);t&&t.hostElement&&(t.boundAnimateScroll39_||(t.boundAnimateScroll39_=t.animateScroll_.bind(ve(t))),t.lastAnimationTime_||(t.lastAnimationTime_=e),200>(e-=t.lastAnimationTime_)?(o(t.hostElement).querySelector("#categories").scrollTop=t.animationStart_+(t.animationEnd_-t.animationStart_)*e/200,Ve.request(t.boundAnimateScroll39_)):(null!=t.animationEnd_&&(o(t.hostElement).querySelector("#categories").scrollTop=t.animationEnd_),t.animationEnd_=t.animationStart_=null,t.lastAnimationTime_=0),t.updateButtons_())},de.log("ENABLE_RAF_HACK_EMOJI_PICKER",e,"OK")}else de.log("ENABLE_RAF_HACK_EMOJI_PICKER",e,"NG")})(),de.log("[End]"),me()})),null!==Ve&&customElements.whenDefined("yt-live-chat-docked-message").then((()=>{a(),_e("YouTube Super Fast Chat"," | yt-live-chat-docked-message hacks"),de.log("[Begin]"),(()=>{const e="yt-live-chat-docked-message",t=document.createElement(e),n=V(t);if(!n||!n.attached)return void de.warn(`proto.attached for ${e} is unavailable.`);let o=!1;"function"==typeof n.detached&&"function"==typeof n.checkIntersections&&"function"==typeof n.onDockableMessagesChanged&&void 0===n.boundCheckIntersections?(de.log("detached: function - OK"),de.log("checkIntersections: function - OK"),de.log("onDockableMessagesChanged: function - OK"),o=J(n.detached,"0.32.22")&&J(n.checkIntersections,"0.128.85")&&J(n.onDockableMessagesChanged,"0.20.11")):(de.log("detached",typeof n.detached,"NG"),de.log("checkIntersections",typeof n.checkIntersections,"NG"),de.log("onDockableMessagesChanged",typeof n.onDockableMessagesChanged,"NG")),o?(n.__boundCheckIntersectionsSubstitutionFn__=function(){const e=this;e.i5zmk||"function"!=typeof e.boundCheckIntersections||"function"!=typeof e.checkIntersections||(e.i5zmk=1,e.boundCheckIntersections=e.checkIntersections.bind(ve(e)))},n.checkIntersections=function(){const e=be(this);if(e&&e.hostElement)if("function"==typeof e.__boundCheckIntersectionsSubstitutionFn__&&e.__boundCheckIntersectionsSubstitutionFn__(),e.dockableMessages.length){e.intersectRAF=Ve.request(e.boundCheckIntersections);let t=e.dockableMessages[0],n=e.hostElement.getBoundingClientRect();t=t.getBoundingClientRect();let o=t.top-n.top,i=8>=o;if(o=8>=o-e.hostElement.clientHeight,i){let s;for(;i&&(s=e.dockableMessages.shift(),i=e.dockableMessages[0],i);){i=i.getBoundingClientRect(),o=i.top-n.top;let e=8>=o;if(8>=o-t.height){if(!e)return;t=i}i=e}e.dock(s)}else o&&e.dockedItem&&e.clear()}else e.intersectRAF=0},n.onDockableMessagesChanged=function(){const e=this;"function"==typeof e.__boundCheckIntersectionsSubstitutionFn__&&e.__boundCheckIntersectionsSubstitutionFn__(),e.dockableMessages.length&&!e.intersectRAF&&(e.intersectRAF=Ve.request(e.boundCheckIntersections))},n.detached=function(){this.intersectRAF&&Ve.cancel(this.intersectRAF)},de.log("ENABLE_RAF_HACK_DOCKED_MESSAGE",e,"OK")):de.log("ENABLE_RAF_HACK_DOCKED_MESSAGE",e,"NG")})(),de.log("[End]"),me()})).catch(console.warn),customElements.whenDefined("yt-img-shadow").then((()=>{a(),_e("YouTube Super Fast Chat"," | yt-img-shadow hacks"),de.log("[Begin]"),(()=>{const e="yt-img-shadow",t=document.createElement(e),n=V(t);n&&n.attached?("function"!=typeof n.thumbnailChanged_||n.thumbnailChanged66_?de.log("cProto.thumbnailChanged_ - NG"):(n.thumbnailChanged66_=n.thumbnailChanged_,n.thumbnailChanged_=function(e){if((!this.oldThumbnail_||!this.thumbnail||this.oldThumbnail_.thumbnails!==this.thumbnail.thumbnails)&&(this.oldThumbnail_||this.thumbnail))return this.thumbnailChanged66_.apply(this,arguments)},de.log("cProto.thumbnailChanged_ - OK")),"function"!=typeof n.setSrc_||n.setSrc66_?de.log("cProto.setSrc_ - NG"):(n.setSrc66_=n.setSrc_,n.setSrc_=function(e){if((((this||0).$||0).img||0).src!==e)return this.setSrc66_.apply(this,arguments)},de.log("cProto.setSrc_ - OK"))):de.warn(`proto.attached for ${e} is unavailable.`)})(),de.log("[End]"),me()})).catch(console.warn),customElements.whenDefined("yt-live-chat-author-badge-renderer").then((()=>{a(),_e("YouTube Super Fast Chat"," | yt-live-chat-author-badge-renderer hacks"),de.log("[Begin]"),(()=>{const e="yt-live-chat-author-badge-renderer",t=document.createElement(e),n=V(t);n&&n.attached?"function"==typeof n.dataChanged&&!n.dataChanged86&&"|0.169.106|".includes(`|${J(n.dataChanged)}|`)?(n.dataChanged86=n.dataChanged,n.dataChanged=function(){const e=(this||0).data,t=((this||0).$||0).image;if(t&&e&&t.firstElementChild){const n=t.firstElementChild;if(n===t.lastElementChild){if(e.icon&&"YT-ICON"===n.nodeName.toUpperCase()){const t=n,o=W(t),i="icon"in o||"defaultToFilled"in o?o:t;if("MODERATOR"===e.icon.iconType&&this.enableNewModeratorBadge)"yt-sys-icons:shield-filled"!==i.icon&&(i.icon="yt-sys-icons:shield-filled"),!0!==i.defaultToFilled&&(i.defaultToFilled=!0);else{const t="live-chat-badges:"+e.icon.iconType.toLowerCase();i.icon!==t&&(i.icon=t),!1!==i.defaultToFilled&&(i.defaultToFilled=!1)}return}if(e.customThumbnail&&"IMG"==n.nodeName.toUpperCase()){const t=n;if(e.customThumbnail.thumbnails.map((e=>e.url)).includes(t.src))return void t.setAttribute("alt",this.hostElement.ariaLabel||"")}}}return this.dataChanged86.apply(this,arguments)},de.log("cProto.dataChanged - OK")):"function"==typeof n.dataChanged&&!n.dataChanged86&&"|1.163.100|1.162.100|1.160.97|1.159.97|".includes(`|${J(n.dataChanged)}|`)?(n.dataChanged86=n.dataChanged,n.dataChanged=function(e){const t=((this||0).$||0).image;if(t&&e&&t.firstElementChild){const n=t.firstElementChild;if(n===t.lastElementChild){if(e.icon&&"YT-ICON"===n.nodeName.toUpperCase()){const t=n,o=W(t),i="icon"in o||"defaultToFilled"in o?o:t;if("MODERATOR"===e.icon.iconType&&this.enableNewModeratorBadge)"yt-sys-icons:shield-filled"!==i.icon&&(i.icon="yt-sys-icons:shield-filled"),!0!==i.defaultToFilled&&(i.defaultToFilled=!0);else{const t="live-chat-badges:"+e.icon.iconType.toLowerCase();i.icon!==t&&(i.icon=t),!1!==i.defaultToFilled&&(i.defaultToFilled=!1)}return}if(e.customThumbnail&&"IMG"==n.nodeName.toUpperCase()){const t=n;if(e.customThumbnail.thumbnails.map((e=>e.url)).includes(t.src))return void t.setAttribute("alt",this.hostElement.ariaLabel||"")}}}return this.dataChanged86.apply(this,arguments)},de.log("cProto.dataChanged - OK")):(X((()=>J(n.dataChanged,"0.169.106"))),de.log("cProto.dataChanged - NG")):de.warn(`proto.attached for ${e} is unavailable.`)})(),de.log("[End]"),me()})).catch(console.warn);{const e=e=>{const t=V(e);t&&t.attached?(t&&"function"==typeof t.immediatelyApplyLiveChatActions&&1===t.immediatelyApplyLiveChatActions.length&&!t.immediatelyApplyLiveChatActions82&&(t.immediatelyApplyLiveChatActions82=t.immediatelyApplyLiveChatActions,t.immediatelyApplyLiveChatActions=function(e){try{x(e)}catch(e){console.warn(e)}return this.immediatelyApplyLiveChatActions82(e)}),t&&"function"==typeof t.preprocessActions_&&1===t.preprocessActions_.length&&!t.preprocessActions82_&&(t.preprocessActions82_=t.preprocessActions_,t.preprocessActions_=function(e){e=this.preprocessActions82_(e);try{x(e)}catch(e){console.warn(e)}return e})):console.warn("proto.attached for yt-live-chat-renderer is unavailable.")};!Ee&&Ae.push(e),ke().then(e)}{const e=e=>{const t=V(e);if(!t||!t.attached)return void console.warn("proto.attached for yt-live-chat-renderer is unavailable.");if(!(262144&~window._flag0281_)&&t&&"function"==typeof t.preprocessActions_&&1===t.preprocessActions_.length&&!t.preprocessActions92_){let e=!1,n=!1,o="",i="",s="";const r=function(){if(e)return this.emitSmoothedMessages018();e=!0;try{if(!n){const e=Object.getOwnPropertyNames(this);for(const t of e){if(`${t}`.endsWith("_estimatedUpdateInterval"))o=t;else if(`${t}`.endsWith("_lastUpdateTime"))i=t;else{if(!`${t}`.endsWith("_messageQueue"))continue;s=t}if(o&&i&&s)break}o&&i&&s&&(n=!0)}o&&i&&(this[o]=78,this[i]=Date.now()-1)}catch(e){}let t,r=!1;try{const e=s?this[s]:null;e&&e.length&&(e.length>255||document.hidden&&(r=!0))}catch(e){}return r?d((()=>this.emitSmoothedMessages019()),250):t=this.emitSmoothedMessages018(),e=!1,t};t.preprocessActions92_=t.preprocessActions_,t.preprocessActions_=function(e){e=this.preprocessActions92_(e);try{const e=this.smoothedQueue_;e&&!e.__fix018__&&(e.__fix018__=!0,e.emitSmoothedMessages018||"function"!=typeof e.emitSmoothedMessages||0!==e.emitSmoothedMessages.length||(e.emitSmoothedMessages018=e.emitSmoothedMessages,e.emitSmoothedMessages019=r,e.emitSmoothedMessages=r))}catch(e){console.warn(e)}return e}}};!Ee&&Ae.push(e),ke().then(e)}{const e=e=>e&&e.get&&!e.set&&e.enumerable&&e.configurable,n=new t,o={},i=function(){let t;if(void 0===n.get(this)){const i=document.createElement;let s=null;if(n.set(this,null),document.createElement=function(){let e=i.apply(this,arguments);return s=e,e},t=this.createTooltipIfRequired14_(),document.createElement=i,s instanceof HTMLElement&&s.is)if(n.set(this,s),s.setAttribute("__nogc__",""),"number"==typeof s.offset&&(o.offset=s.offset),"boolean"==typeof s.fitToVisibleBounds&&(o.fitToVisibleBounds=s.fitToVisibleBounds),"string"==typeof s.position&&(o.position=s.position),"string"==typeof s.for&&(o.for=s.for),"undefined"!=typeof Polymer&&Polymer.__fixedGetOwnerRoot__&&Polymer.__fixedQuerySelector__);else{let t=null;const n=W(s);e(Object.getOwnPropertyDescriptor(n.constructor.prototype||{},"target"))?t=n.constructor.prototype:e(Object.getOwnPropertyDescriptor(s.constructor.prototype||{},"target"))&&(t=s.constructor.prototype),t&&(delete t.target,Object.defineProperty(t,"target",{get(){const e=W(this),t=e.hostElement||e;let n=t.parentNode,o=t.getRootNode();const i=e.for||t.for;return i?o.querySelector("#"+i):n}}))}else n.set(this,null)}else t=this.createTooltipIfRequired14_();const i=n.get(this);if(i){i.remove(),"number"==typeof o.offset&&(i.offset=o.offset),"boolean"==typeof o.fitToVisibleBounds&&(i.fitToVisibleBounds=o.fitToVisibleBounds);try{"string"==typeof o.position&&(i.position=o.position),"string"==typeof o.for?i.for=o.for:delete i.for}catch(e){}}const s=i;if(!s._showing&&s.__shady_parentNode&&s.__shady_parentNode!==s.parentNode){if(s.__shady_parentNode)try{s.__shady_parentNode.__shady_removeChild(s)}catch(e){}if(s.__shady_parentNode)try{s.__shady_parentNode.removeChild(s)}catch(e){}if(s.__shady_parentNode)try{s.__shady_parentNode.__shady_native_removeChild(s)}catch(e){}if(s.__shady_parentNode)try{y.call(s.__shady_parentNode,s)}catch(e){}if(s.parentNode&&!s.__shady_parentNode)try{y.call(s.parentNode,s)}catch(e){}}return t},s=e=>{const t=V(e);t&&t.attached?t&&"function"==typeof t.createTooltipIfRequired_&&0===t.createTooltipIfRequired_.length&&!t.createTooltipIfRequired14_&&(t.createTooltipIfRequired14_=t.createTooltipIfRequired_,t.createTooltipIfRequired_=i):console.warn("proto.attached for yt-live-chat-renderer is unavailable.")};!Ee&&Ae.push(s),ke().then(s),customElements.whenDefined("tp-yt-paper-tooltip").then((()=>{a(),_e("YouTube Super Fast Chat"," | tp-yt-paper-tooltip hacks"),de.log("[Begin]"),(()=>{const e="tp-yt-paper-tooltip",t=document.createElement(e),n=V(t);n&&n.attached?("function"==typeof n.attached&&"function"==typeof n.detached&&n._readyClients&&n._attachDom&&n.ready&&!n._readyClients43?(n._readyClients43=n._readyClients,n._readyClients=function(){let e=n._readyClients43.apply(this,arguments);return this.$&&this.$$&&this.$.tooltip&&(this.root=null),e},de.log("_readyClients - OK")):de.log("_readyClients - NG"),"function"!=typeof n.show||n.show17?de.log("trim tooltip content - NG"):(n.show17=n.show,n.show=function(){let e=this.show17.apply(this,arguments);return!0===this._showing&&c.resolve(this).then((e=>{const t=(e.$||0).tooltip;if(t&&null===t.firstElementChild){let e=t.textContent;"string"==typeof e&&e.length>=2&&(t.textContent=e.trim())}e=null})).catch(console.warn),e},de.log("trim tooltip content - OK"))):de.warn(`proto.attached for ${e} is unavailable.`)})(),de.log("[End]"),me()})).catch(console.warn)}{const e=()=>{let e=0,t=null;const n={muHandler282:function(n){if(!n||!n.isTrusted||!e)return;const o=t;e=0,t=null;const i=be(pe)||0,s=i.hostElement||i;if(!s.hasAttribute("menu-visible"))return;HTMLElement.prototype.closest.call(s,"yt-live-chat-banner-renderer")||0||o&&o.positionTarget&&s.contains(o.positionTarget)&&(e=Date.now(),n.stopImmediatePropagation(),n.stopPropagation(),c.resolve(o).then((e=>{e.cancel(),e=null})))},mlHandler282:function(n){e=0,t=null},ckHandler282:function(t){t&&t.isTrusted&&e&&Date.now()-e<40&&(e=Date.now(),t.stopImmediatePropagation(),t.stopPropagation())},tapHandler282:function(t){t&&t.isTrusted&&e&&Date.now()-e<40&&(e=Date.now(),t.stopImmediatePropagation(),t.stopPropagation())},handleEvent(e){if(e){const t=be(pe)||0,n=W(t),o=n.hostElement||n;if(!n||!0!==n.isAttached||!0!==o.isConnected)return;switch(e.type){case"mouseup":return this.muHandler282(e);case"mouseleave":return this.mlHandler282(e);case"tap":return this.tapHandler282(e);case"click":return this.ckHandler282(e)}}}};document.addEventListener("mousedown",(function(o){if(!o||!o.isTrusted||!o.target)return;e=0,t=null;const i=be(pe);if(!i)return;const s=HTMLElement.prototype.closest.call(i,"[menu-visible]")||0;if(!s||!s.hasAttribute("whole-message-clickable"))return;const r=W(s);if(!r.isClickableChatRow111||!r.isClickableChatRow111()||!HTMLElement.prototype.contains.call(s,o.target))return;if(HTMLElement.prototype.closest.call(s,"yt-live-chat-banner-renderer")||0)return;let a=null;for(const e of document.querySelectorAll("tp-yt-iron-dropdown.style-scope.yt-live-chat-app"))e&&e.positionTarget===i&&(a=e);if(a&&(t=a)){e=Date.now(),o.stopImmediatePropagation(),o.stopPropagation(),pe=ve(s);const t={capture:!0,passive:!1,once:!0};document.removeEventListener("mouseup",n,t),document.removeEventListener("mouseleave",n,t),document.removeEventListener("tap",n,t),document.removeEventListener("click",n,t),document.addEventListener("mouseup",n,t),document.addEventListener("mouseleave",n,t),document.addEventListener("tap",n,t),document.addEventListener("click",n,t)}}),!0)};ze(["yt-live-chat-paid-message-renderer","yt-live-chat-membership-item-renderer","yt-live-chat-paid-sticker-renderer","yt-live-chat-text-message-renderer","yt-live-chat-auto-mod-message-renderer"]).then((t=>{a(),_e("YouTube Super Fast Chat"," | yt-live-chat-message-renderer(s)... hacks"),de.log("[Begin]");let n=!1;const o=function(){return this.data&&"function"==typeof this.shouldSupportWholeItemClick&&"function"==typeof this.hasModerationOverlayVisible&&this.data.contextMenuEndpoint&&this.wholeMessageClickable&&this.shouldSupportWholeItemClick()&&!this.hasModerationOverlayVisible()};for(const e of t)(()=>{const t=e,i=document.createElement(t),s=V(i);if(!s||!s.attached)return void de.warn(`proto.attached for ${t} is unavailable.`);const r=W(i);if("wholeMessageClickable"in r&&"function"==typeof r.hasModerationOverlayVisible&&"function"==typeof r.shouldSupportWholeItemClick){s.isClickableChatRow111=o;"function"==typeof s.shouldSupportWholeItemClick&&"function"==typeof s.hasModerationOverlayVisible&&(n=!0),de.log("shouldSupportWholeItemClick - OK",t)}else de.log("shouldSupportWholeItemClick - NG",t)})();n&&(e(),de.log("FIX_CLICKING_MESSAGE_MENU_DISPLAY_ON_MOUSE_CLICK - Doc MouseEvent OK")),de.log("[End]"),me()})).catch(console.warn)}{let e=null,t=null;document.addEventListener("mousedown",(n=>{if(!n||!n.isTrusted)return;let o=n.target;for(;o instanceof HTMLElement&&!o.is;o=o.parentNode);if(!o||!o.is)return;const i=W(o);if("function"==typeof i.onItemTap){i._onItemTap_isNonStationary=0;const s=V(o);s.onItemTap366||"function"!=typeof s.onItemTap||1!==s.onItemTap.length||(s.onItemTap366=s.onItemTap,s.onItemTap=function(e){const t=this._onItemTap_isNonStationary;if(this._onItemTap_isNonStationary=0,!(t>Date.now()))return this.onItemTap366.apply(this,arguments)}),t=n,e=ve(i)}else t=null,e=null}),{capture:!0,passive:!0}),document.addEventListener("mouseup",(n=>{if(!n||!n.isTrusted)return;const o=t;if(t=null,!o)return;const i=be(e);if(e=null,i)if(n.timeStamp-o.timeStamp>280)i._onItemTap_isNonStationary=Date.now()+40;else if(`${window.getSelection()}`.trim().replace(/[\u2000-\u200a\u202f\u2800\u200B\u200C\u200D\uFEFF]+/g,"").length>=1)i._onItemTap_isNonStationary=Date.now()+40;else{const e=n.clientX-o.clientX,t=n.clientY-o.clientY,s=Math.sqrt(e*e+t*t),r=s*window.devicePixelRatio*.26458333;i._onItemTap_isNonStationary=r>1?Date.now()+40:0}}),{capture:!0,passive:!0})}document.addEventListener("mousedown",(function(e){let t=0,n=0,i=(e||0).target||0;if(!i)return;for(;i instanceof HTMLElement&&!(++t>4)&&"string"!=typeof(i.is||W(i).is||null);)i=oe(i);const s=[];for(;i instanceof HTMLElement&&!(++n>4);){const e=W(i);if("string"==typeof(i.is||e.is||null)&&s.push(i),"function"==typeof e.showContextMenu)break;i=i.parentComponent||e.parentComponent||null}if(!(i instanceof HTMLElement))return;const r=W(i);if("function"!=typeof r.handleGetContextMenuResponse_||"function"!=typeof r.handleGetContextMenuError)return void console.log("Error Found: handleGetContextMenuResponse_ OR handleGetContextMenuError is not defined on a component with showContextMenu");const a=(r.data||0).contextMenuEndpoint;if(!a)return;if(r.opened||!r.isAttached)return;"function"!=typeof r.__cacheResolvedEndpointData__&&console.log(`preRequest for showContextMenu in ${r.is} is not yet supported.`);const l=W(d=i).$||d.$||0;var d;let h=!1;if((s.length>=2&&"menu-button"===s[0].id&&(l||0)["menu-button"]===s[0]||1===s.length&&s[0]===i||s.length>=2&&"author-photo"===s[0].id&&(l||0)["author-photo"]===s[0])&&(h=!0),!1===h)return void console.log("doPreRequest = fasle on showContextMenu",s);if("function"!=typeof r.__getCachedEndpointData__||r.__getCachedEndpointData__(a))return;if("function"==typeof r.__showContextMenu_mutex_unlock_isEmpty__&&!r.__showContextMenu_mutex_unlock_isEmpty__())return void console.log("preRequest on showContextMenu aborted due to stacked network request");if(h){let t=0;const n=function(){let e=null;const t=new c((t=>{e=t})),n=()=>{const t=e;t&&(e=null,t())};return{p1:t,p1unlock:n,assignLock:(e,i)=>{e.__showContextMenu_assign_lock__(t),i&&o(n,i)}}}(),i=800,s="__$$__proxy_to_this__$$__"+Date.now();try{const o=function(){n.p1unlock(),5===t?this[s]===r?(e=>{if(!(e=e.response||e))return void console.log("unexpected error in prerequest for showContextMenu.onSuccess");let t=null;e.liveChatItemContextMenuSupportedRenderers&&e.liveChatItemContextMenuSupportedRenderers.menuRenderer&&(t=e.liveChatItemContextMenuSupportedRenderers.menuRenderer),t&&(e=t,r.__cacheResolvedEndpointData__(a,e,!0))})(...arguments):console.log("Error in prerequest for showContextMenu.this"):console.log("Error in prerequest for showContextMenu.onSuccessHelperFn")},i=function(){n.p1unlock(),5===t?this[s]===r?(()=>{r.__cacheResolvedEndpointData__(a,null)})(...arguments):console.log("Error in prerequest for showContextMenu.this"):console.log("Error in prerequest for showContextMenu.onFailureHelperFn")},l=new Proxy({__showContextMenu_forceNativeRequest__:1,get handleGetContextMenuResponse_(){return t+=2,o},get handleGetContextMenuError(){return t+=3,i}},{get(e,t,n){if(t in e)return e[t];if(t===s)return r;let o=!1;return t in r&&("data"===t||"function"==typeof r[t])&&(o=!0),o?r[t]:void 0}}),c=(()=>{const{target:t,bubbles:n,cancelable:o,cancelBubble:i,srcElement:s,timeStamp:r,defaultPrevented:a,currentTarget:l,composed:c}=e,d=function(){},[h,u,p]=[d,d,d];return{type:"tap",eventPhase:0,isTrusted:!1,__composed:!0,bubbles:n,cancelable:o,cancelBubble:i,timeStamp:r,target:t,srcElement:s,defaultPrevented:a,currentTarget:l,composed:c,stopPropagation:h,stopImmediatePropagation:u,preventDefault:p}})();r.showContextMenu.call(l,c)}catch(e){console.warn(e),t=7}if(5!==t)return void console.log("Error in prerequest for showContextMenu",t);n.assignLock(r,i)}}),!0),ze(["yt-live-chat-ticker-sponsor-item-renderer","yt-live-chat-ticker-paid-message-item-renderer","yt-live-chat-banner-header-renderer","yt-live-chat-text-message-renderer","ytd-sponsorships-live-chat-gift-purchase-announcement-renderer","ytd-sponsorships-live-chat-header-renderer","ytd-sponsorships-live-chat-gift-redemption-announcement-renderer","yt-live-chat-paid-sticker-renderer","yt-live-chat-viewer-engagement-message-renderer","yt-live-chat-paid-message-renderer"]).then((e=>{a(),_e("YouTube Super Fast Chat"," | fixShowContextMenu"),de.log("[Begin]");const n=new w;let i=null,s=null;const r=new t,l=(e,t,n)=>{t?(n&&(t=b(t)),r.set(e,t)):r.remove(e)},d=function(e){return(e=e||(this.data||0).contextMenuEndpoint||0)?r.get(e):null},h=function(e){e=b(e),c.resolve(e).then((e=>{this.__showContextMenu_skip_cacheResolvedEndpointData__=1,this.showContextMenu_(e),this.__showContextMenu_skip_cacheResolvedEndpointData__=0,e=null}))},u=function(e){if(this&&this.__showContextMenu_forceNativeRequest__)return this.showContextMenu37(e);if(this&&this.isAttached){if(!this.__showContextMenu_forceNativeRequest__){const t=(this.data||0).contextMenuEndpoint||0;if(t){const n=this.__getCachedEndpointData__(t);if(n)return this.__showCachedContextMenu__(n),void(e&&e.stopPropagation())}}return this.showContextMenu37(e)}},p=function(e){if(this&&this.__showContextMenu_forceNativeRequest__)return this.showContextMenu37_(e);if(this&&this.isAttached){if(!this.__showContextMenu_skip_cacheResolvedEndpointData__){const t=(this.data||0).contextMenuEndpoint||0;if(t){const n=this.__cacheResolvedEndpointData__;"function"==typeof n&&n(t,e,!0)}}return this.showContextMenu37_(e)}},_=()=>null===i,m=function(e){n.lockWith((t=>{e.then(t),e=null,t=null}))},f=function(e){if(this.__showContextMenu_forceNativeRequest__)return this.showContextMenu47(e);if(!this||!this.isAttached)return;s=this;const t=ve(this);n.lockWith((n=>{const r=be(t);if(s===r&&r){o(n,800),i=n;try{r.showContextMenu47(e)}catch(e){console.warn(e),n()}}else n()}))},y=function(e){return i&&this===s&&(i(),i=null),this.showContextMenu47_(e)};for(const t of e)(()=>{const e=document.createElement(t),n=V(e);n&&n.attached?("function"!=typeof n.showContextMenu||"function"!=typeof n.showContextMenu_||n.showContextMenu37||n.showContextMenu37_||1!==n.showContextMenu.length||1!==n.showContextMenu_.length?de.log("CACHE_SHOW_CONTEXT_MENU_FOR_REOPEN - NG",t):(n.showContextMenu37_=n.showContextMenu_,n.showContextMenu37=n.showContextMenu,n.__showContextMenu_forceNativeRequest__=0,n.__cacheResolvedEndpointData__=l,n.__getCachedEndpointData__=d,n.__showCachedContextMenu__=h,n.showContextMenu=u,n.showContextMenu_=p,de.log("CACHE_SHOW_CONTEXT_MENU_FOR_REOPEN - OK",t)),"function"!=typeof n.showContextMenu||"function"!=typeof n.showContextMenu_||n.showContextMenu47||n.showContextMenu47_||1!==n.showContextMenu.length||1!==n.showContextMenu_.length?de.log("ENABLE_MUTEX_FOR_SHOW_CONTEXT_MENU - NG",t):(n.showContextMenu47_=n.showContextMenu_,n.showContextMenu47=n.showContextMenu,n.__showContextMenu_mutex_unlock_isEmpty__=_,n.__showContextMenu_assign_lock__=m,n.showContextMenu=f,n.showContextMenu_=y,de.log("ENABLE_MUTEX_FOR_SHOW_CONTEXT_MENU - OK",t))):de.warn(`proto.attached for ${t} is unavailable.`)})();de.log("[End]"),me()})).catch(console.warn),customElements.whenDefined("tp-yt-paper-dialog").then((()=>{a(),_e("YouTube Super Fast Chat"," | tp-yt-paper-dialog hacks"),de.log("[Begin]"),(()=>{const e="tp-yt-paper-dialog",t=document.createElement(e),n=V(t);n&&n.attached?"function"!=typeof n.__openedChanged||n.__openedChanged49||0!==n.__openedChanged.length||(n.__openedChanged49=n.__openedChanged,n.__openedChanged=function(){const e=(this||0)._manager||0;return e&&!e.trackBackdrop49&&e.trackBackdrop&&(e.trackBackdrop49=e.trackBackdrop,0===e.trackBackdrop.length&&(e.trackBackdrop=function(){try{return this.trackBackdrop49()}catch(e){let t=!0;e instanceof TypeError&&"this.backdropElement.prepare is not a function"===e.message&&(t=!1),t&&console.log("manager.trackBackdrop",e)}})),this.__openedChanged49()}):de.warn(`proto.attached for ${e} is unavailable.`)})(),de.log("[End]"),me()})).catch(console.warn),customElements.whenDefined("tp-yt-iron-dropdown").then((()=>{a(),_e("YouTube Super Fast Chat"," | tp-yt-iron-dropdown hacks"),de.log("[Begin]"),(()=>{const e="tp-yt-iron-dropdown",s=document.createElement(e),r=V(s);if(r&&r.attached){if("function"!=typeof r.__deraf||2!==r.__deraf.length||r.__deraf34||"2.42.24"!==J(r.__deraf)?de.log("USE_VANILLA_DEREF - NG"):(r.__deraf_hn__=function(e,n){const o=`_rafHandler_${e}`,i=this[o]||(this[o]=new t);if(i.has(n))return i.get(n);const s=()=>{this.__rafs[e]=null,n.call(this)};return i.set(n,s),i.set(s,s),s},r.__deraf34=r.__deraf,r.__deraf=function(e,t){let o=this.__rafs;null!==o[e]&&i(o[e]),o[e]=n(this.__deraf_hn__(e,t))},de.log("USE_VANILLA_DEREF - OK")),"function"!=typeof r.__deraf||2!==r.__deraf.length||r.__deraf66?de.log("FIX_DROPDOWN_DERAF - NG"):(r.__deraf66=r.__deraf,r.__deraf=function(e,t){return this.__byPassRAF__&&c.resolve(this).then((e=>{t.call(e),e=null})),this.__deraf66.apply(this,arguments)},de.log("FIX_DROPDOWN_DERAF - OK")),"function"!=typeof r.__openedChanged||r.__mtChanged__||"0.46.20"!==J(r.__openedChanged))X((()=>J(r.__openedChanged,"0.46.20"))),de.log("FIX_MENU_REOPEN_RENDER_PERFORMANC_1 - NG");else{let e=null,t=null,i=0;r.__mtChanged__=function(e){c.resolve(this).then((e=>(e._applyFocus(),e))).then((t=>{e?t._renderOpened():t._renderClosed(),t=null})).catch(console.warn)};const s=()=>{i&&(i=0,t&&!e&&t.isAttached?t.__mtChanged__(1):e&&!t&&e.isAttached&&e.__mtChanged__(0),t=null,e=null)};"function"!=typeof r._openedChanged||r._openedChanged66||(r._openedChanged66=r._openedChanged,r._openedChanged=function(){this.__byPassRAF__=!0;let e=this._openedChanged66.apply(this,arguments);return this.__byPassRAF__=!1,e});const a=(e,t,n)=>({get:(t[e]||0).get||(n[e]||0).get,set:(t[e]||0).set||(n[e]||0).set});if(r.__modifiedMenuPropsFn__=function(){const e=Object.getOwnPropertyDescriptors(this.constructor.prototype),t=Object.getOwnPropertyDescriptors(this),n=a("autoFitOnAttach",e,t),o=a("expandSizingTargetForScrollbars",e,t),i=a("allowOutsideScroll",e,t);if(n.get||n.set)return void console.warn("there is setter/getter for autoFitOnAttach");if(o.get||o.set)return void console.warn("there is setter/getter for expandSizingTargetForScrollbars");if(!i.get||!i.set)return void console.warn("there is NO setter-getter for allowOutsideScroll");let{autoFitOnAttach:s,expandSizingTargetForScrollbars:r,allowOutsideScroll:l}=this;this.__AllowOutsideScrollPD__=i;Object.defineProperties(this,{autoFitOnAttach:{get:()=>s,set:e=>(s=e,!0),enumerable:!0,configurable:!0},expandSizingTargetForScrollbars:{get:()=>r,set:e=>(r=e,!0),enumerable:!0,configurable:!0},allowOutsideScroll:{get(){return!!this._modifiedMenuPropOn062__||l},set(e){return l=e,this.__AllowOutsideScrollPD__.set.call(this,e),!0},enumerable:!0,configurable:!0}})},"function"!=typeof r.position||r.position34||"function"!=typeof r.refit)de.log("FIX_MENU_POSITION_ON_SHOWN - NG");else{let e=0;r.__refitByPosition__=function(){if(e++,e<=0&&(e=0),1!==e)return;const t=this.hostElement||this;if("visible"===document.visibilityState){const n=this.sizingTarget;if(!n)return void(e=0);t.setAttribute("rNgzQ",""),n.setAttribute("rNgzQ","");const i=()=>{t.removeAttribute("rNgzQ"),n.removeAttribute("rNgzQ")};o((async()=>{for(;e>=1;)await ge(n),this.opened&&this.isAttached&&!0===n.isConnected&&n===this.sizingTarget&&n.matches('ytd-menu-popup-renderer[slot="dropdown-content"].yt-live-chat-app')&&this.refit(),e--;e=0,c.resolve().then(i)}),4)}else e=0},r.position34=r.position,r.position=function(){return this._positionInitialize_&&(this._positionInitialize_=0,this.__refitByPosition__()),r.position34.apply(this,arguments)},de.log("FIX_MENU_POSITION_ON_SHOWN - OK")}r.__openedChanged=function(){this._positionInitialize_=1,"boolean"!=typeof this.__menuTypeCheck__&&(this.__menuTypeCheck__=!0),this.opened?c.resolve().then((()=>{this._prepareRenderOpened()})).then((()=>{try{this._manager.addOverlay(this)}catch(e){console.log("this._manager.addOverlay(this) fails.")}if(1!==this._manager._overlays.length)return 1;t=this,e=null,i=i||n(s)})).then((e=>{e&&this.__mtChanged__(1)})).catch(console.warn):c.resolve().then((()=>{try{this._manager.removeOverlay(this)}catch(e){console.log("this._manager.removeOverlay(this) fails.")}if(0!==this._manager._overlays.length)return 1;e=this,t=null,i=i||n(s)})).then((e=>{e&&this.__mtChanged__(0)})).catch(console.warn)},de.log("BOOST_MENU_OPENCHANGED_RENDERING - OK")}"function"!=typeof r.__openedChanged||r.__openedChanged82||(r.__openedChanged82=r.__openedChanged,r.__openedChanged=function(){const e=this.positionTarget;return pe=e?ve(e):null,this.__openedChanged82.apply(this,arguments)})}else de.warn(`proto.attached for ${e} is unavailable.`)})(),de.log("[End]"),me()})).catch(console.warn),(()=>{let e=0;const t=new WeakSet;new MutationObserver((e=>{for(const e of document.querySelectorAll("[shared-tooltip-text]:not([__a6cwm__])"))e.setAttribute("__a6cwm__","")})).observe(document,{subtree:!0,attributes:!0,attributeFilter:["shared-tooltip-text"],childList:!0});new MutationObserver((e=>{for(const n of e){const e=n.target;if(n.attributeName)if(e.getAttribute("shared-tooltip-text")){t.add(e);for(const n of e.getElementsByTagName("*"))t.add(n)}else if(t.has(e)){t.remove(e);for(const n of e.getElementsByTagName("*"))t.remove(n)}}})).observe(document,{subtree:!0,attributes:!0,attributeFilter:["__a6cwm__","shared-tooltip-text"],childList:!1});let n=0;const o=o=>{const i=V(o);if(i&&i.attached)if(1===n||"function"!=typeof i.onMouseOver_||i.onMouseOver37_||"function"!=typeof i.createTooltipIfRequired_||0!==i.createTooltipIfRequired_.length)1!==n&&(n=2,console.log("[yt-chat-lcr] FIX_MOUSEOVER_FN - NG"));else{n=1;const s=i.onMouseOver37_=i.onMouseOver_;if((()=>{let e,t=[],n=!1;try{s.call(o,{type:"mouseover",target:new Proxy({nodeName:"DIV",tagName:"DIV",getAttribute:function(){},parentNode:null},{get(e,n){if(t.push(`getter:${n}`),!(n in e))throw Error(`getter ${n} is not found`)},set(e,n,o){throw t.push(`setter:${n}`),Error(`setter ${n} is not found`)}})})}catch(e){n=!0}if(n)return!1;if("getter:getAttribute,getter:parentNode"!==t.join(","))return!1;t.length=0;try{e=new Proxy({nodeName:"DIV",tagName:"DIV",getAttribute:function(e){return t.push(`getter:getAttribute(${e})`),"shared-tooltip-text"===e?":cherry_blossom:":null},parentNode:null},{get(e,n){if(t.push(`getter:${n}`),!(n in e))throw Error(`getter ${n} is not found`);return e[n]},set(e,n,o){throw t.push(`setter:${n}`),Error(`setter ${n} is not found`)}}),s.call(o,{type:"mouseover",target:new Proxy({nodeName:"IMG",tagName:"IMG",id:"img",getAttribute:function(e){return t.push(`getter:getAttribute(${e})`),"shared-tooltip-text"===e?":cherry_blossom:":null},get parentNode(){return e},get parentElement(){return e}},{get(e,n){if(t.push(`getter:${n}`),!(n in e))throw Error(`getter ${n} is not found`);return e[n]},set(e,n,o){throw t.push(`setter:${n}`),Error(`setter ${n} is not found`)}})})}catch(e){n=!0}return e=null,!(!n||"getter:getAttribute,getter:getAttribute,getter:getAttribute(shared-tooltip-text),getter:getAttribute,getter:getAttribute(shared-tooltip-text),getter:tagName,getter:parentElement,getter:id,getter:id,getter:$$"!==t.join(","))||void 0})()){i.onMouseOver_=function(n){const o=(n||0).target||0;if(1===o.nodeType&&t.has(o)){const t=Date.now();if(e+18>t)return;const o=W(this);e=t;try{o.onMouseOver37_.call(this,n)}catch(e){console.warn(e)}}};const n=[...new Set([o,...document.querySelectorAll("yt-live-chat-renderer")])];for(const e of n){const t=W(e),n=t.hostElement;n&&!0===t.isAttached&&t.onMouseOver37_===i.onMouseOver37_&&"function"==typeof i.onMouseOver_&&i.onMouseOver_!==i.onMouseOver37_&&t.onMouseOver_===i.onMouseOver_&&(n.removeEventListener("mouseover",i.onMouseOver37_,!0),n.addEventListener("mouseover",i.onMouseOver_,!0))}console.log("[yt-chat-lcr] FIX_MOUSEOVER_FN - OK")}else console.log("[yt-chat-lcr] FIX_MOUSEOVER_FN - NG")}else console.warn("proto.attached for yt-live-chat-renderer is unavailable.")};!Ee&&Ae.push(o),ke().then(o)})();const se=e=>{if(!e||"object"!=typeof e)return;const t=e.constructor.prototype;let o="";for(const[t,n]of Object.entries(e))t.includes("_callbacks_")&&(o=t);if(!o||"function"!=typeof t.unsubscribe||2!==t.unsubscribe.length)return;if(t.unsubscribe16)return;t.unsubscribe16=t.unsubscribe,_e("YouTube Super Fast Chat"," | *live-chat-manager* hacks"),de.log("[Begin]");const i=new Map,s=function(e){if(!e||"string"!=typeof e)return null;let t=i.get(e);return t||(t=atob(e.replace(/-/g,"+").replace(/_/g,"/")),i.set(e,t),t)},r=[];let a=0,l=0;const c=()=>{if(a=0,1===r.length){const e=r[0];r.length=0,e()}else if(r.length>1){const e=r.slice(0);r.length=0;for(const t of e)t()}};{const e=e=>{if(e&&"function"==typeof e.unsubscribe16&&2===e.unsubscribe16.length&&"function"==typeof e.subscribe18&&(0===e.subscribe18.length||3===e.subscribe18.length)){const t=new Set(Object.keys(e)),n=new Set(Object.keys(e.constructor.prototype));if(t.size>=6&&n.size>=4){let i=0;for(const e of["nextHandle_","clients_",o,"unsubscribeAsyncHandles_","subscribe","subscribe18"])i+=t.has(e)?1:0;for(const e of["unsubscribe","handleInvalidationData_","unsubscribe16","subscribe19"])i+=n.has(e)?1:0;if(10===i){const t=e=>(e||0).constructor===Object;if(t(e.clients_)&&t(e[o])&&t(e.unsubscribeAsyncHandles_))return!0}}}return!1};t.subscribe19=function(e,t,n){const o=this.clients_||0,i=this.unsubscribeAsyncHandles_||0;if(!0!==this.__doCustomSubscribe__||!o||!i)return this.subscribe18.apply(this,arguments);let r=((e||0).invalidationId||0).objectId;return r?(r=s(r),o[r]&&i[r]<0&&delete i[r],this.subscribe18.apply(this,arguments)):this.subscribe18.apply(this,arguments)},t.unsubscribe=function(t,i){this.subscribe18||"function"!=typeof this.subscribe||(this.subscribe18=this.subscribe,this.subscribe=this.subscribe19,this.__doCustomSubscribe__=e(this));const d=this.clients_,h=this.unsubscribeAsyncHandles_;if(!0!==this.__doCustomSubscribe__||!d||!h)return this.unsubscribe16.apply(this,arguments);let u=((t||0).invalidationId||0).objectId;if(!u)return this.unsubscribe16.apply(this,arguments);u=s(u);const p=this[o]||0,_=p[u]||0;if(_&&(delete _[i],(e=>{for(const t in e)if(e.hasOwnProperty(t))return!1;return!0})(_))){const e=d[u];l=1+(1073741823&l);const t=-l;r.push((()=>{if(t===h[u]){const t={callbacks:p,callbackObj:_,client:d[u],handle:h[u]};let n=0;try{d[u]===e?(e&&"function"==typeof e.dispose&&e.dispose(),delete d[u],delete h[u],n=1):n=2}catch(e){console.warn(e)}console.log(`unsubscribed: ${n}`,this,t)}})),h[u]=t,0===a&&(a=n(c))}},de.log("CHANGE_MANAGER_UNSUBSCRIBE - OK")}de.log("[End]"),me()};c.all([customElements.whenDefined("yt-icon-shape"),customElements.whenDefined("yt-icon")]).then((()=>{let e=0,t=[document.createElement("yt-icon-shape"),document.createElement("yt-icon")];for(const n of t){let t=V(n);t&&"function"==typeof t.shouldRenderIconShape&&!t.shouldRenderIconShape571&&1===t.shouldRenderIconShape.length&&(X((()=>J(t.shouldRenderIconShape,"1.70.38"))),e++,t.shouldRenderIconShape571=t.shouldRenderIconShape,t.shouldRenderIconShape=function(e){return this.isAnimatedIcon?this.shouldRenderIconShape571(e):this.iconType&&this.iconShapeData?!this.iconName&&this.shouldRenderIconShape571(e):this.shouldRenderIconShape571(e)})}1===e?console.log("modified shouldRenderIconShape - Y"):console.log("modified shouldRenderIconShape - N",e)})),customElements.whenDefined("yt-invalidation-continuation").then((()=>{let e=null;a(),_e("YouTube Super Fast Chat"," | yt-invalidation-continuation hacks"),de.log("[Begin]"),(()=>{const t="yt-invalidation-continuation",n=document.createElement(t),o=V(n);if(!o||!o.attached)return void de.warn(`proto.attached for ${t} is unavailable.`);const i=W(n).manager_||0;e=i})(),de.log("[End]"),me(),se(e)})).catch(console.warn),customElements.whenDefined("yt-live-interactivity-component-background").then((()=>{a(),_e("YouTube Super Fast Chat"," | yt-live-interactivity-component-background hacks"),de.log("[Begin]"),(()=>{const e="yt-live-interactivity-component-background",t=document.createElement(e),n=V(t);n&&n.attached?(n.__toStopAfterRun__=function(e){let t=new MutationObserver((()=>{t.disconnect(),t.takeRecords(),t=null,this.lottieAnimation&&this.lottieAnimation.stop(),K().then((()=>{this.lottieAnimation&&this.lottieAnimation.stop()}))}));t.observe(e,{subtree:!0,childList:!0})},"function"!=typeof n.maybeLoadAnimationBackground||n.maybeLoadAnimationBackground77||0!==n.maybeLoadAnimationBackground.length?de.log("INTERACTIVITY_BACKGROUND_ANIMATION(1) - NG"):(n.maybeLoadAnimationBackground77=n.maybeLoadAnimationBackground,n.maybeLoadAnimationBackground=function(){let e=!0,t=!1;if(!this.__bypassDisableAnimationBackground__){let n=!1;this.lottieAnimation||(n=!0),n&&(!0===this.useAnimationBackground&&console.log("DISABLE_INTERACTIVITY_BACKGROUND_ANIMATION",this.lottieAnimation),e=!0,t=!0)}if(e){t&&this.hostElement instanceof HTMLElement&&this.__toStopAfterRun__(this.hostElement);const e=this.maybeLoadAnimationBackground77.apply(this,arguments);return t&&this.lottieAnimation&&this.lottieAnimation.stop(),e}},de.log("INTERACTIVITY_BACKGROUND_ANIMATION(1) - OK"))):de.warn(`proto.attached for ${e} is unavailable.`)})(),de.log("[End]"),me()})).catch(console.warn),customElements.whenDefined("yt-live-chat-text-input-field-renderer").then((()=>{a(),_e("YouTube Super Fast Chat"," | yt-live-chat-text-input-field-renderer hacks"),de.log("[Begin]"),(()=>{const e="yt-live-chat-text-input-field-renderer",t=document.createElement(e),n=V(t);n&&n.attached?"function"!=typeof n.focusedChanged||0!==n.focusedChanged.length||n.focusedChanged372||(n.focusedChanged372=n.focusedChanged,n.focusedChanged=function(){c.resolve(this).then((e=>{!0===e.isAttached&&e.focusedChanged372()}))}):de.warn(`proto.attached for ${e} is unavailable.`)})(),de.log("[End]"),me()})),customElements.whenDefined("yt-emoji-fountain-view-model").then((()=>{a(),_e("YouTube Super Fast Chat"," | yt-emoji-fountain-view-model hacks"),de.log("[Begin]"),(()=>{const e="yt-emoji-fountain-view-model",n=document.createElement(e),o=V(n);if(o&&o.attached)if("function"!=typeof o.createEmojiAnimation||o.createEmojiAnimation037||4!==o.createEmojiAnimation.length)de.log("USE_RM_ON_FOUNTAIN_MODEL - NG");else{o.createEmojiAnimation037=o.createEmojiAnimation;const e={emojiId:"❤",image:{thumbnails:[{url:"https://fonts.gstatic.com/s/e/notoemoji/15.1/2764/72.png"}]},searchTerms:["red","heart"],shortcuts:[":red_heart:",":heart:","<3"],index:318},i={reactionBuckets:[{totalReactions:1,duration:{seconds:"1"},intensityScore:.75,reactionsData:[{unicodeEmojiId:"❤",reactionCount:1}]}],noEmojiIdentifier:"NO_EMOJI",emojiBucketTimerId:155,lastEmojiRequestedForTesting:"❤",emojiAnimationTimerId:338,emojiManager:new Proxy(n.emojiManager,{get(t,n){if("emojiMap"===n){const o=t[n]||{};return o["❤"]||(o["❤"]=e),o}}}),emojiContainer:null},s=new Set;try{Z=!0,Q=function(e){return s.add(e),!1},o.createEmojiAnimation037.call(i,"❤",!1,void 0,void 0)}catch(e){}Z=!1;const r=s.size;if(s.clear(),r>0){const e=new Set,n=new t,i=[],s=()=>{if(0!==i.length){for(const e of i)e.parentNode&&e.remove();i.length=0}},r=e=>{const t=e.target;t instanceof HTMLElement&&"EMOJI"===t.nodeName&&t.__removeOnAnimationEnd381__&&(t.__removeOnAnimationEnd381__=!1,i.push(t),c.resolve().then(s))},a=function(e,t,o=void 0){if("animationend"===e&&this.__emoji4818__&&"function"==typeof t&&0===t.length&&void 0===o&&"EMOJI"===(this||0).nodeName&&/^function\s*\(\s*\)\s*\{\s*[$a-wA-Z_-\d]+\.remove\(\);?\s*}$/.test(`${t}`)){const e=be(n.get(this)),t=e?e.hostElement:null;if(e&&t instanceof HTMLElement)return e.__addedAnimationEnd381__||(e.__addedAnimationEnd381__=!0,t.addEventListener("animationend",r,Qe)),void(this.__removeOnAnimationEnd381__=!0)}return this.addEventListener717(...arguments)};let l;const d=function(t){try{if(!be(t))return;const n=Date.now();for(const t of e){const[o,i,s,r]=t,a=be(o);a?s?r||!1===a.isConnected&&(t[2]=0,t[3]=n):!0===a.isConnected&&(t[2]=n,t[3]=0,e.delete(t),e.add(t)):e.delete(t)}}catch(e){console.warn(e)}};Q=function(t){if("string"!=typeof t)return;const o=Date.now(),i=o-1600,s=t.toLowerCase();try{for(const t of e){const[n,r,a,l]=t;if(!l||l>i)continue;const c=be(n);if(!c){e.delete(t);continue}if(c.__tagNameLower584__===s&&!1===c.isConnected){if(e.delete(t),t[1]=o,t[2]=0,t[3]=0,e.add(t),c.className="",c.style="","img"===s&&(c.src="",c.alt=""),!I){let e=document.createElement("noscript");e.style.all="unset",document.body.prepend(e),I=e}const n=W(c),i=n.hostElement;if(i===c&&!n.__dataInvalid&&n.__dataEnabled&&n.__dataReady){I.appendChild(i),n.__dataInvalid=!1,n.__dataEnabled=!0,n.__dataReady=!0,n.__data&&(n.__data=Object.assign({},n.__data)),n.__dataPending={},n.__dataOld={};try{n.markDirty()}catch(e){}try{n.markDirtyVisibilityObserver()}catch(e){}try{n.wasPrescan=n.wasVisible=!1}catch(e){}}return c.__reuseCount918__=(c.__reuseCount918__||0)+1,c}}}catch(e){console.warn(e)}const r=document.createElement4719(t);try{const t=[ve(r),o,0,0];if(e.add(t),r.__tagNameLower584__=s,r.addEventListener717||(r.addEventListener717=r.addEventListener,r.addEventListener=a,"emoji"===r.nodeName.toLowerCase()&&(r.__emoji4818__=!0)),l){be(l)&&n.set(r,l)}}catch(e){console.warn(e)}return r},o.createEmojiAnimation=function(e,t,n,o){if(Z=!0,!this.__weakRef9591__){this.__weakRef9591__=new WeakRef(this);const e=this.__weakRef9591__,t=this.hostElement;new MutationObserver((()=>{c.resolve(e).then(d)})).observe(t,{subtree:!0,childList:!0})}l=this.__weakRef9591__;let i=this.createEmojiAnimation037(e,t,n,o);return l=null,Z=!1,i},de.log("USE_RM_ON_FOUNTAIN_MODEL - OK")}else de.log("USE_RM_ON_FOUNTAIN_MODEL - NG")}else de.warn(`proto.attached for ${e} is unavailable.`)})(),de.log("[End]"),me()})).catch(console.warn)}));const it=()=>{let e=window.onerror;try{JSON.parse("{}")}catch(e){console.warn(e)}e!==window.onerror&&(console.groupCollapsed("%cYouTube Super Fast Chat%c | JS Engine Issue Found","background-color: #010502; color: #fe806a; font-weight: 700; padding: 2px;","background-color: #010502; color: #fe806a; font-weight: 300; padding: 2px;"),console.warn("\nJSON.parse is hacked (e.g. Brave's script injection) which causes window.onerror changes on every JSON.parse call.\nPlease install https://greasyfork.org/scripts/473972-youtube-js-engine-tamer to fix the issue.\n"),console.groupEnd())};ye.then(it)}))})({IntersectionObserver:IntersectionObserver});